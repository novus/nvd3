(function(){function t(e,t){return(new Date(t,e+1,0)).getDate()}function n(e,t,n){return function(r,i,s){var o=e(r),u=[];o<r&&t(o);if(s>1)while(o<i){var a=new Date(+o);n(a)%s===0&&u.push(a),t(o)}else while(o<i)u.push(new Date(+o)),t(o);return u}}var e={version:"0.0.1a",dev:!0};window.nv=e,e.tooltip={},e.utils={},e.models={},e.charts={},e.graphs=[],e.logs={},e.dispatch=d3.dispatch("render_start","render_end"),e.dev&&(e.dispatch.on("render_start",function(t){e.logs.startTime=+(new Date)}),e.dispatch.on("render_end",function(t){e.logs.endTime=+(new Date),e.logs.totalTime=e.logs.endTime-e.logs.startTime,e.log("total",e.logs.totalTime)})),e.log=function(){return e.dev&&console.log&&console.log.apply&&console.log.apply(console,arguments),arguments[arguments.length-1]},e.render=function r(t){t=t||1,r.active=!0,e.dispatch.render_start(),setTimeout(function(){var n;for(var i=0;i<t&&(graph=r.queue[i]);i++)n=graph.generate(),typeof graph.callback==typeof Function&&graph.callback(n),e.graphs.push(n);r.queue.splice(0,i),r.queue.length?setTimeout(arguments.callee,0):(e.render.active=!1,e.dispatch.render_end())},0)},e.render.queue=[],e.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),e.render.queue.push(t),e.render.active||e.render()},e.identity=function(e){return e},e.strip=function(e){return e.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(e){return new Date(e.getFullYear(),e.getMonth(),0)},d3.time.monthEnds=n(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(e){return e.getMonth()}),function(){var t=window.nv.tooltip={};t.show=function(t,n,r,i,s,o){var u=document.createElement("div");u.className="nvtooltip "+(o?o:"xy-tooltip"),r=r||"s",i=i||20;var a=s?s:document.getElementsByTagName("body")[0];u.innerHTML=n,u.style.left=0,u.style.top=0,u.style.opacity=0,a.appendChild(u);var f=parseInt(u.offsetHeight),l=parseInt(u.offsetWidth),c=e.utils.windowSize().width,h=e.utils.windowSize().height,p=a.scrollTop,d=a.scrollLeft,v,m;switch(r){case"e":v=t[0]-l-i,m=t[1]-f/2,v<d&&(v=t[0]+i),m<p&&(m=p+5),m+f>p+h&&(m=p-f-5);break;case"w":v=t[0]+i,m=t[1]-f/2,v+l>c&&(v=t[0]-l-i),m<p&&(m=p+5),m+f>p+h&&(m=p-f-5);break;case"n":v=t[0]-l/2,m=t[1]+i,v<d&&(v=d+5),v+l>c&&(v=c-l-5),m+f>p+h&&(m=t[1]-f-i);break;case"s":v=t[0]-l/2,m=t[1]-f-i,v<d&&(v=d+5),v+l>c&&(v=c-l-5),p>m&&(m=t[1]+20)}return u.style.left=v+"px",u.style.top=m+"px",u.style.opacity=1,u.style.position="absolute",u.style.pointerEvents="none",u},t.cleanup=function(){var e=document.getElementsByClassName("nvtooltip"),t=[];while(e.length)t.push(e[0]),e[0].style.transitionDelay="0 !important",e[0].style.opacity=0,e[0].className="nvtooltip-pending-removal";setTimeout(function(){while(t.length){var e=t.pop();e.parentNode.removeChild(e)}},500)}}(),e.utils.windowSize=function(){var e={width:640,height:480};return document.body&&document.body.offsetWidth&&(e.width=document.body.offsetWidth,e.height=document.body.offsetHeight),document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(e.width=document.documentElement.offsetWidth,e.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(e.width=window.innerWidth,e.height=window.innerHeight),e},e.utils.windowResize=function(e){var t=window.onresize;window.onresize=function(n){typeof t=="function"&&t(n),e(n)}},e.utils.getColor=function(t){return arguments.length?Object.prototype.toString.call(t)==="[object Array]"?function(e,n){return e.color||t[n%t.length]}:t:e.utils.defaultColor()},e.utils.defaultColor=function(){var e=d3.scale.category20().range();return function(t,n){return t.color||e[n%e.length]}},e.utils.pjax=function(t,n){function r(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),e.utils.pjax(t,n)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},e.models.axis=function(){function h(n){return n.each(function(n){var h=d3.select(this),p=h.selectAll("g.nv-wrap.nv-axis").data([n]),d=p.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),v=d.append("g"),m=p.select("g");f!==null?l.ticks(f):(l.orient()=="top"||l.orient()=="bottom")&&l.ticks(Math.abs(r.range()[1]-r.range()[0])/100),d3.transition(m).call(l),c=c||l.scale();var g=m.selectAll("text.nv-axislabel").data([i||null]);g.exit().remove();switch(l.orient()){case"top":g.enter().append("text").attr("class","nv-axislabel").attr("text-anchor","middle").attr("y",0);var y=r.range().length==2?r.range()[1]:r.range()[r.range().length-1]+(r.range()[1]-r.range()[0]);g.attr("x",y/2);if(s){var b=p.selectAll("g.nv-axisMaxMin").data(r.domain());b.enter().append("g").attr("class","nv-axisMaxMin").append("text"),b.exit().remove(),b.attr("transform",function(e,t){return"translate("+r(e)+",0)"}).select("text").attr("dy","0em").attr("y",-l.tickPadding()).attr("text-anchor","middle").text(function(e,t){return(""+l.tickFormat()(e)).match("NaN")?"":l.tickFormat()(e)}),d3.transition(b).attr("transform",function(e,t){return"translate("+r.range()[t]+",0)"})}break;case"bottom":var w=30,E=30;if(u%360){var S=m.selectAll("g").select("text");S.each(function(e,t){var n=this.getBBox().width;n>E&&(E=n)});var x=Math.abs(Math.sin(u*Math.PI/180)),w=(x?x*E:E)+30;S.attr("transform",function(e,t,n){return"rotate("+u+" 0,0)"}).attr("text-anchor",u%360>0?"start":"end")}g.enter().append("text").attr("class","nv-axislabel").attr("text-anchor","middle").attr("y",w);var y=r.range().length==2?r.range()[1]:r.range()[r.range().length-1]+(r.range()[1]-r.range()[0]);g.attr("x",y/2);if(s){var b=p.selectAll("g.nv-axisMaxMin").data(r.domain());b.enter().append("g").attr("class","nv-axisMaxMin").append("text"),b.exit().remove(),b.attr("transform",function(e,t){return"translate("+r(e)+",0)"}).select("text").attr("dy",".71em").attr("y",l.tickPadding()).attr("transform",function(e,t,n){return"rotate("+u+" 0,0)"}).attr("text-anchor",u%360>0?"start":"end").text(function(e,t){return(""+l.tickFormat()(e)).match("NaN")?"":l.tickFormat()(e)}),d3.transition(b).attr("transform",function(e,t){return"translate("+r.range()[t]+",0)"})}break;case"right":g.enter().append("text").attr("class","nv-axislabel").attr("text-anchor",a?"middle":"begin").attr("transform",a?"rotate(90)":"").attr("y",a?-Math.max(e.right,t)-12:-10),g.attr("x",a?r.range()[0]/2:l.tickPadding());if(s){var b=p.selectAll("g.nv-axisMaxMin").data(r.domain());b.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),b.exit().remove(),b.attr("transform",function(e,t){return"translate(0,"+r(e)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",l.tickPadding()).attr("text-anchor","start").text(function(e,t){return(""+l.tickFormat()(e)).match("NaN")?"":l.tickFormat()(e)}),d3.transition(b).attr("transform",function(e,t){return"translate(0,"+r.range()[t]+")"}).select("text").style("opacity",1)}break;case"left":g.enter().append("text").attr("class","nv-axislabel").attr("text-anchor",a?"middle":"end").attr("transform",a?"rotate(-90)":"").attr("y",a?-Math.max(e.left,t)+12:-10),g.attr("x",a?-r.range()[0]/2:-l.tickPadding());if(s){var b=p.selectAll("g.nv-axisMaxMin").data(r.domain());b.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),b.exit().remove(),b.attr("transform",function(e,t){return"translate(0,"+c(e)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-l.tickPadding()).attr("text-anchor","end").text(function(e,t){return(""+l.tickFormat()(e)).match("NaN")?"":l.tickFormat()(e)}),d3.transition(b).attr("transform",function(e,t){return"translate(0,"+r.range()[t]+")"}).select("text").style("opacity",1)}}g.text(function(e){return e}),s&&(l.orient()==="left"||l.orient()==="right")&&m.selectAll("g").each(function(e,t){if(r(e)<r.range()[1]+10||r(e)>r.range()[0]-10)e>1e-10||e<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove()});if(s&&(l.orient()==="top"||l.orient()==="bottom")){var T=[];p.selectAll("g.nv-axisMaxMin").each(function(e,t){t?T.push(r(e)-this.getBBox().width-4):T.push(r(e)+this.getBBox().width+4)}),m.selectAll("g").each(function(e,t){if(r(e)<T[0]||r(e)>T[1])e>1e-10||e<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove()})}o&&m.selectAll("line.tick").filter(function(e){return!parseFloat(Math.round(e*1e5)/1e6)}).classed("zero",!0),c=r.copy()}),h}var e={top:0,right:0,bottom:0,left:0},t=60,n=60,r=d3.scale.linear(),i=null,s=!0,o=!0,u=0,a=!0,f=null,l=d3.svg.axis().scale(r).orient("bottom").tickFormat(function(e){return e}),c;return d3.rebind(h,l,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(h,r,"domain","range","rangeBand","rangeBands"),h.margin=function(t){return arguments.length?(e.top=typeof t.top!="undefined"?t.top:e.top,e.right=typeof t.right!="undefined"?t.right:e.right,e.bottom=typeof t.bottom!="undefined"?t.bottom:e.bottom,e.left=typeof t.left!="undefined"?t.left:e.left,h):e},h.width=function(e){return arguments.length?(t=e,h):t},h.ticks=function(e){return arguments.length?(f=e,h):f},h.height=function(e){return arguments.length?(n=e,h):n},h.axisLabel=function(e){return arguments.length?(i=e,h):i},h.showMaxMin=function(e){return arguments.length?(s=e,h):s},h.highlightZero=function(e){return arguments.length?(o=e,h):o},h.scale=function(e){return arguments.length?(r=e,l.scale(r),d3.rebind(h,r,"domain","range","rangeBand","rangeBands"),h):r},h.rotateYLabel=function(e){return arguments.length?(a=e,h):a},h.rotateLabels=function(e){return arguments.length?(u=e,h):u},h},e.models.historicalBar=function(){function m(e){return e.each(function(e){var m=n-t.left-t.right,g=r-t.top-t.bottom,b=d3.select(this);s.domain(p||d3.extent(e[0].values.map(u).concat(f))).range([0,m]),o.domain(d||d3.extent(e[0].values.map(a).concat(l))).range([g,0]);if(s.domain()[0]===s.domain()[1]||o.domain()[0]===o.domain()[1])singlePoint=!0;s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]-s.domain()[0]*.01,s.domain()[1]+s.domain()[1]*.01]):s.domain([-1,1])),o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]+o.domain()[0]*.01,o.domain()[1]-o.domain()[1]*.01]):o.domain([-1,1]));var w=b.selectAll("g.nv-wrap.nv-bar").data([e[0].values]),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-bar"),S=E.append("defs"),T=E.append("g"),N=w.select("g");T.append("g").attr("class","nv-bars"),w.attr("transform","translate("+t.left+","+t.top+")"),b.on("click",function(e,t){v.chartClick({data:e,index:t,pos:d3.event,id:i})}),S.append("clipPath").attr("id","nv-chart-clip-path-"+i).append("rect"),w.select("#nv-chart-clip-path-"+i+" rect").attr("width",m).attr("height",g),N.attr("clip-path",c?"url(#nv-chart-clip-path-"+i+")":"");var C=w.select(".nv-bars").selectAll(".nv-bar").data(function(e){return e});C.exit().remove();var k=C.enter().append("rect").attr("class",function(e,t,n){return(a(e,t)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+t}).attr("fill",function(e,t){return h(e,t)}).attr("x",0).attr("y",function(e,t){return o(Math.max(0,a(e,t)))}).attr("height",function(e,t){return Math.abs(o(a(e,t))-o(0))}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),v.elementMouseover({point:t,series:e[0],pos:[s(u(t,n)),o(a(t,n))],pointIndex:n,seriesIndex:0,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),v.elementMouseout({point:t,series:e[0],pointIndex:n,seriesIndex:0,e:d3.event})}).on("click",function(e,t){v.elementClick({value:a(e,t),data:e,index:t,pos:[s(u(e,t)),o(a(e,t))],e:d3.event,id:i}),d3.event.stopPropagation()}).on("dblclick",function(e,t){v.elementDblClick({value:a(e,t),data:e,index:t,pos:[s(u(e,t)),o(a(e,t))],e:d3.event,id:i}),d3.event.stopPropagation()});C.attr("class",function(e,t,n){return(a(e,t)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+t}).attr("transform",function(t,n){return"translate("+(s(u(t,n))-m/e[0].values.length*.5)+",0)"}).attr("width",m/e[0].values.length*.9),d3.transition(C).attr("y",function(e,t){return o(Math.max(0,a(e,t)))}).attr("height",function(e,t){return Math.abs(o(a(e,t))-o(0))})}),m}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e4),s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=[],l=[0],c=!0,h=e.utils.defaultColor(),p,d,v=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return m.dispatch=v,m.x=function(e){return arguments.length?(u=e,m):u},m.y=function(e){return arguments.length?(a=e,m):a},m.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,m):t},m.width=function(e){return arguments.length?(n=e,m):n},m.height=function(e){return arguments.length?(r=e,m):r},m.xScale=function(e){return arguments.length?(s=e,m):s},m.yScale=function(e){return arguments.length?(o=e,m):o},m.xDomain=function(e){return arguments.length?(p=e,m):p},m.yDomain=function(e){return arguments.length?(d=e,m):d},m.forceX=function(e){return arguments.length?(f=e,m):f},m.forceY=function(e){return arguments.length?(l=e,m):l},m.clipEdge=function(e){return arguments.length?(c=e,m):c},m.color=function(t){return arguments.length?(h=e.utils.getColor(t),m):h},m.id=function(e){return arguments.length?(i=e,m):i},m},e.models.bullet=function(){function l(t){return t.each(function(t,a){var l=o-e.left-e.right,c=u-e.top-e.bottom,h=d3.select(this),p=r.call(this,t,a).slice().sort(d3.descending),d=i.call(this,t,a).slice().sort(d3.descending),v=s.call(this,t,a).slice().sort(d3.descending),m=d3.scale.linear().domain([0,Math.max(p[0],d[0],v[0])]).range(n?[l,0]:[0,l]),g=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(m.range());this.__chart__=m;var y=h.selectAll("g.nv-wrap.nv-bullet").data([t]),b=y.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),w=b.append("g"),E=y.select("g");y.attr("transform","translate("+e.left+","+e.top+")");var S=function(e){return Math.abs(g(e)-g(0))},x=function(e){return Math.abs(m(e)-m(0))},T=E.selectAll("rect.nv-range").data(p);T.enter().append("rect").attr("class",function(e,t){return"nv-range nv-s"+t}).attr("width",S).attr("height",c).attr("x",n?g:0).on("mouseover",function(e,t){f.elementMouseover({value:e,label:t<=0?"Maximum":t>1?"Minimum":"Mean",pos:[m(e),c/2]})}).on("mouseout",function(e,t){f.elementMouseout({value:e,label:t<=0?"Minimum":t>=1?"Maximum":"Mean"})}),d3.transition(T).attr("x",n?m:0).attr("width",x).attr("height",c);var N=E.selectAll("rect.nv-measure").data(v);N.enter().append("rect").attr("class",function(e,t){return"nv-measure nv-s"+t}).attr("width",S).attr("height",c/3).attr("x",n?g:0).attr("y",c/3).on("mouseover",function(e){f.elementMouseover({value:e,label:"Current",pos:[m(e),c/2]})}).on("mouseout",function(e){f.elementMouseout({value:e,label:"Current"})}),d3.transition(N).attr("width",x).attr("height",c/3).attr("x",n?m:0).attr("y",c/3);var C=E.selectAll("path.nv-markerTriangle").data(d),k=c/6;C.enter().append("path").attr("class","nv-markerTriangle").attr("transform",function(e){return"translate("+g(e)+","+c/2+")"}).attr("d","M0,"+k+"L"+k+","+ -k+" "+ -k+","+ -k+"Z").on("mouseover",function(e,t){f.elementMouseover({value:e,label:"Previous",pos:[m(e),c/2]})}).on("mouseout",function(e,t){f.elementMouseout({value:e,label:"Previous"})}),d3.transition(C).attr("transform",function(e){return"translate("+m(e)+","+c/2+")"}),C.exit().remove()}),d3.timer.flush(),l}var e={top:0,right:0,bottom:0,left:0},t="left",n=!1,r=function(e){return e.ranges},i=function(e){return e.markers},s=function(e){return e.measures},o=380,u=30,a=null,f=d3.dispatch("elementMouseover","elementMouseout");return l.dispatch=f,l.orient=function(e){return arguments.length?(t=e,n=t=="right"||t=="bottom",l):t},l.ranges=function(e){return arguments.length?(r=e,l):r},l.markers=function(e){return arguments.length?(i=e,l):i},l.measures=function(e){return arguments.length?(s=e,l):s},l.width=function(e){return arguments.length?(o=e,l):o},l.height=function(e){return arguments.length?(u=e,l):u},l.margin=function(t){return arguments.length?(e.top=typeof t.top!="undefined"?t.top:e.top,e.right=typeof t.right!="undefined"?t.right:e.right,e.bottom=typeof t.bottom!="undefined"?t.bottom:e.bottom,e.left=typeof t.left!="undefined"?t.left:e.left,l):e},l.tickFormat=function(e){return arguments.length?(a=e,l):a},l},e.models.bulletChart=function(){function m(e){return e.each(function(n,h){var p=d3.select(this),g=(a||parseInt(p.style("width"))||960)-i.left-i.right,y=f-i.top-i.bottom,b=this;m.update=function(){m(e)},m.container=this;var w=s.call(this,n,h).slice().sort(d3.descending),E=o.call(this,n,h).slice().sort(d3.descending),S=u.call(this,n,h).slice().sort(d3.descending),x=p.selectAll("g.nv-wrap.nv-bulletChart").data([n]),T=x.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),N=T.append("g"),C=x.select("g");N.append("g").attr("class","nv-bulletWrap"),N.append("g").attr("class","nv-titles"),x.attr("transform","translate("+i.left+","+i.top+")");var k=d3.scale.linear().domain([0,Math.max(w[0],E[0],S[0])]).range(r?[g,0]:[0,g]),L=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(k.range());this.__chart__=k;var A=function(e){return Math.abs(L(e)-L(0))},O=function(e){return Math.abs(k(e)-k(0))},M=N.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(f-i.top-i.bottom)/2+")");M.append("text").attr("class","nv-title").text(function(e){return e.title}),M.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(e){return e.subtitle}),t.width(g).height(y);var _=C.select(".nv-bulletWrap");d3.transition(_).call(t);var D=l||k.tickFormat(8),P=C.selectAll("g.nv-tick").data(k.ticks(8),function(e){return this.textContent||D(e)}),H=P.enter().append("g").attr("class","nv-tick").attr("transform",function(e){return"translate("+L(e)+",0)"}).style("opacity",1e-6);H.append("line").attr("y1",y).attr("y2",y*7/6),H.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",y*7/6).text(D),d3.transition(H).attr("transform",function(e){return"translate("+k(e)+",0)"}).style("opacity",1);var B=d3.transition(P).attr("transform",function(e){return"translate("+k(e)+",0)"}).style("opacity",1);B.select("line").attr("y1",y).attr("y2",y*7/6),B.select("text").attr("y",y*7/6),d3.transition(P.exit()).attr("transform",function(e){return"translate("+k(e)+",0)"}).style("opacity",1e-6).remove(),d.on("tooltipShow",function(e){c&&v(e,b.parentNode)})}),d3.timer.flush(),m}var t=e.models.bullet(),n="left",r=!1,i={top:5,right:40,bottom:20,left:120},s=function(e){return e.ranges},o=function(e){return e.markers},u=function(e){return e.measures},a=null,f=55,l=null,c=!0,h=function(e,t,n,r,i){return"<h3>"+r.label+"</h3>"+"<p>"+r.value+"</p>"},p="No Data Available.",d=d3.dispatch("tooltipShow","tooltipHide"),v=function(t,n){var n=document.getElementById("chart"),r=t.pos[0]+n.offsetLeft+i.left,s=t.pos[1]+n.offsetTop+i.top,o="<h3>"+t.label+"</h3>"+"<p>"+t.value+"</p>";e.tooltip.show([r,s],o,t.value<0?"e":"w",null,n)};return t.dispatch.on("elementMouseover.tooltip",function(e){d.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){d.tooltipHide(e)}),d.on("tooltipHide",function(){c&&e.tooltip.cleanup()}),m.dispatch=d,m.bullet=t,m.orient=function(e){return arguments.length?(n=e,r=n=="right"||n=="bottom",m):n},m.ranges=function(e){return arguments.length?(s=e,m):s},m.markers=function(e){return arguments.length?(o=e,m):o},m.measures=function(e){return arguments.length?(u=e,m):u},m.width=function(e){return arguments.length?(a=e,m):a},m.height=function(e){return arguments.length?(f=e,m):f},m.margin=function(e){return arguments.length?(i.top=typeof e.top!="undefined"?e.top:i.top,i.right=typeof e.right!="undefined"?e.right:i.right,i.bottom=typeof e.bottom!="undefined"?e.bottom:i.bottom,i.left=typeof e.left!="undefined"?e.left:i.left,m):i},m.tickFormat=function(e){return arguments.length?(l=e,m):l},m.tooltips=function(e){return arguments.length?(c=e,m):c},m.tooltipContent=function(e){return arguments.length?(h=e,m):h},m.noData=function(e){return arguments.length?(p=e,m):p},m},e.models.cumulativeLineChart=function(){function T(e,t){}function N(e,t){e.x+=d3.event.dx,e.i=Math.round(w.invert(e.x)),d3.select(this).attr("transform","translate("+w(e.i)+",0)")}function C(e,t){k.update()}function k(e){return e.each(function(d){var T=d3.select(this).classed("nv-chart-"+g,!0),N=this,C=(a||parseInt(T.style("width"))||960)-o.left-o.right,A=(f||parseInt(T.style("height"))||400)-o.top-o.bottom;k.update=function(){k(e)},k.container=this;if(!d||!d.length||!d.filter(function(e){return e.values.length}).length){var O=T.selectAll(".nv-noData").data([y]);return O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",o.left+C/2).attr("y",o.top+A/2).text(function(e){return e}),k}T.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale();if(!p){var M=d.filter(function(e){return!e.disabled}).map(function(e,n){var r=d3.extent(e.values,t.y());return[(r[0]-r[1])/(1+r[1]),(r[1]-r[0])/(1+r[0])]}),_=[d3.min(M,function(e){return e[0]}),d3.max(M,function(e){return e[1]})];t.yDomain(_)}else t.yDomain(null);w.domain([0,d[0].values.length-1]).range([0,C]).clamp(!0);var d=L(E.i,d),D=T.selectAll("g.nv-wrap.nv-cumulativeLine").data([d]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),H=D.select("g");P.append("g").attr("class","nv-x nv-axis"),P.append("g").attr("class","nv-y nv-axis"),P.append("g").attr("class","nv-linesWrap"),P.append("g").attr("class","nv-legendWrap"),P.append("g").attr("class","nv-controlsWrap"),l&&(i.width(C),H.select(".nv-legendWrap").datum(d).call(i),o.top!=i.height()&&(o.top=i.height(),A=(f||parseInt(T.style("height"))||400)-o.top-o.bottom),H.select(".nv-legendWrap").attr("transform","translate(0,"+ -o.top+")"));if(h){var B=[{key:"Re-scale y-axis",disabled:!p}];s.width(140).color(["#444","#444","#444"]),H.select(".nv-controlsWrap").datum(B).attr("transform","translate(0,"+ -o.top+")").call(s)}D.attr("transform","translate("+o.left+","+o.top+")"),t.y(function(e){return e.display.y}).width(C).height(A).color(d.map(function(e,t){return e.color||u(e,t)}).filter(function(e,t){return!d[t].disabled}));var j=H.select(".nv-linesWrap").datum(d.filter(function(e){return!e.disabled}));d3.transition(j).call(t);var F=j.selectAll(".nv-indexLine").data([E]);F.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).call(x),F.attr("transform",function(e){return"translate("+w(e.i)+",0)"}).attr("height",A),n.scale(v).ticks(C/100).tickSize(-A,0),H.select(".nv-x.nv-axis").attr("transform","translate(0,"+m.range()[0]+")"),d3.transition(H.select(".nv-x.nv-axis")).call(n),r.scale(m).ticks(A/36).tickSize(-C,0),d3.transition(H.select(".nv-y.nv-axis")).call(r),s.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,p=!t.disabled,e.transition().call(k)}),i.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,d.filter(function(e){return!e.disabled}).length||d.map(function(e){return e.disabled=!1,D.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(k)}),b.on("tooltipShow",function(e){c&&S(e,N.parentNode)})}),k}function L(e,n){return n.map(function(n,r){var i=t.y()(n.values[e],e);return n.values=n.values.map(function(e,n){return e.display={y:(t.y()(e,n)-i)/(1+i)},e}),n})}var t=e.models.line(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.legend(),o={top:30,right:30,bottom:50,left:60},u=e.utils.defaultColor(),a=null,f=null,l=!0,c=!0,h=!0,p=!0,d=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},v,m,g=t.id(),y="No Data Available.",b=d3.dispatch("tooltipShow","tooltipHide");n.orient("bottom").tickPadding(5),r.orient("left");var w=d3.scale.linear(),E={i:0,x:0},S=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=d(i.series.key,a,f,i,k);e.tooltip.show([o,u],l,null,null,s)},x=d3.behavior.drag().on("dragstart",T).on("drag",N).on("dragend",C);return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],b.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){b.tooltipHide(e)}),b.on("tooltipHide",function(){c&&e.tooltip.cleanup()}),k.dispatch=b,k.lines=t,k.legend=i,k.xAxis=n,k.yAxis=r,d3.rebind(k,t,"defined","isArea","x","y","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),k.margin=function(e){return arguments.length?(o.top=typeof e.top!="undefined"?e.top:o.top,o.right=typeof e.right!="undefined"?e.right:o.right,o.bottom=typeof e.bottom!="undefined"?e.bottom:o.bottom,o.left=typeof e.left!="undefined"?e.left:o.left,k):o},k.width=function(e){return arguments.length?(a=e,k):a},k.height=function(e){return arguments.length?(f=e,k):f},k.color=function(t){return arguments.length?(u=e.utils.getColor(t),i.color(u),k):u},k.showControls=function(e){return arguments.length?(h=e,k):h},k.showLegend=function(e){return arguments.length?(l=e,k):l},k.tooltips=function(e){return arguments.length?(c=e,k):c},k.tooltipContent=function(e){return arguments.length?(d=e,k):d},k.noData=function(e){return arguments.length?(y=e,k):y},k},e.models.discreteBar=function(){function y(e){return e.each(function(e){var i=n-t.left-t.right,y=r-t.top-t.bottom,b=d3.select(this);e=e.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var w=p&&d?[]:e.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0}})});s.domain(p||d3.merge(w).map(function(e){return e.x})).rangeBands([0,i],.1),o.domain(d||d3.extent(d3.merge(w).map(function(e){return e.y}).concat(f))),c?o.range([y-(o.domain()[0]<0?12:0),o.domain()[1]>0?12:0]):o.range([y,0]),m=m||s,g=g||o.copy().range([o(0),o(0)]);var E=b.selectAll("g.nv-wrap.nv-discretebar").data([e]),S=E.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),T=S.append("g"),N=E.select("g");T.append("g").attr("class","nv-groups"),E.attr("transform","translate("+t.left+","+t.top+")");var C=E.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});C.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(C.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),C.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}),d3.transition(C).style("stroke-opacity",1).style("fill-opacity",.75);var k=C.selectAll("g.nv-bar").data(function(e){return e.values});k.exit().remove();var L=k.enter().append("g").attr("transform",function(e,t,n){return"translate("+s(u(e,t))+", "+o(0)+")"}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),v.elementMouseover({value:a(t,n),point:t,series:e[t.series],pos:[s(u(t,n))+s.rangeBand()*(t.series+.5)/e.length,o(a(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),v.elementMouseout({value:a(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){v.elementClick({value:a(t,n),point:t,series:e[t.series],pos:[s(u(t,n))+s.rangeBand()*(t.series+.5)/e.length,o(a(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){v.elementDblClick({value:a(t,n),point:t,series:e[t.series],pos:[s(u(t,n))+s.rangeBand()*(t.series+.5)/e.length,o(a(t,n))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()});L.append("rect").attr("height",0).attr("width",s.rangeBand()/e.length),c?(L.append("text").attr("text-anchor","middle"),k.selectAll("text").attr("x",s.rangeBand()/2).attr("y",function(e,t){return a(e,t)<0?o(a(e,t))-o(0)+12:-4}).text(function(e,t){return h(a(e,t))})):k.selectAll("text").remove(),k.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(e,t){return e.color||l(e,t)}).style("stroke",function(e,t){return e.color||l(e,t)}).attr("transform",function(e,t){return"translate("+s(u(e,t))+", "+(a(e,t)<0?g(0):g(a(e,t)))+")"}).selectAll("rect").attr("width",s.rangeBand()/e.length),d3.transition(k).attr("transform",function(e,t){return"translate("+s(u(e,t))+", "+(a(e,t)<0?o(0):o(a(e,t)))+")"}).selectAll("rect").attr("height",function(e,t){return Math.abs(o(a(e,t))-o(0))}),m=s.copy(),g=o.copy()}),y}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e4),s=d3.scale.ordinal(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=e.utils.defaultColor(),c=!1,h=d3.format(",.2f"),p,d,v=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),m,g;return y.dispatch=v,y.x=function(e){return arguments.length?(u=e,y):u},y.y=function(e){return arguments.length?(a=e,y):a},y.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,y):t},y.width=function(e){return arguments.length?(n=e,y):n},y.height=function(e){return arguments.length?(r=e,y):r},y.xScale=function(e){return arguments.length?(s=e,y):s},y.yScale=function(e){return arguments.length?(o=e,y):o},y.xDomain=function(e){return arguments.length?(p=e,y):p},y.yDomain=function(e){return arguments.length?(d=e,y):d},y.forceY=function(e){return arguments.length?(f=e,y):f},y.color=function(t){return arguments.length?(l=e.utils.getColor(t),y):l},y.id=function(e){return arguments.length?(i=e,y):i},y.showValues=function(e){return arguments.length?(c=e,y):c},y.valueFormat=function(e){return arguments.length?(h=e,y):h},y},e.models.discreteBarChart=function(){function m(e){return e.each(function(u){var l=d3.select(this),g=this,b=(s||parseInt(l.style("width"))||960)-i.left-i.right,w=(o||parseInt(l.style("height"))||400)-i.top-i.bottom;m.update=function(){e.transition().call(m)},m.container=this;if(!u||!u.length||!u.filter(function(e){return e.values.length}).length){var E=l.selectAll(".nv-noData").data([p]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",i.left+b/2).attr("y",i.top+w/2).text(function(e){return e}),m}l.selectAll(".nv-noData").remove(),c=t.xScale(),h=t.yScale();var S=l.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([u]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),N=T.append("defs"),C=S.select("g");T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis"),T.append("g").attr("class","nv-barsWrap"),C.attr("transform","translate("+i.left+","+i.top+")"),t.width(b).height(w);var k=C.select(".nv-barsWrap").datum(u.filter(function(e){return!e.disabled}));d3.transition(k).call(t),N.append("clipPath").attr("id","nv-x-label-clip-"+t.id()).append("rect"),C.select("#nv-x-label-clip-"+t.id()+" rect").attr("width",c.rangeBand()*(a?2:1)).attr("height",16).attr("x",-c.rangeBand()/(a?1:2)),n.scale(c).ticks(b/100).tickSize(-w,0),C.select(".nv-x.nv-axis").attr("transform","translate(0,"+(h.range()[0]+(t.showValues()&&h.domain()[0]<0?16:0))+")"),C.select(".nv-x.nv-axis").transition().duration(0).call(n);var L=C.select(".nv-x.nv-axis").selectAll("g");a&&L.selectAll("text").attr("transform",function(e,t,n){return"translate(0,"+(n%2==0?"0":"12")+")"}),r.scale(h).ticks(w/36).tickSize(-b,0),d3.transition(C.select(".nv-y.nv-axis")).call(r),d.on("tooltipShow",function(e){f&&v(e,g.parentNode)})}),m}var t=e.models.discreteBar(),n=e.models.axis(),r=e.models.axis(),i={top:10,right:10,bottom:50,left:60},s=null,o=null,u=e.utils.getColor(),a=!1,f=!0,l=function(e,t,n,r,i){return"<h3>"+t+"</h3>"+"<p>"+n+"</p>"},c,h,p="No Data Available.",d=d3.dispatch("tooltipShow","tooltipHide");n.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),r.orient("left").tickFormat(d3.format(",.1f"));var v=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),c=l(i.series.key,a,f,i,m);e.tooltip.show([o,u],c,i.value<0?"n":"s",null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=
[e.pos[0]+i.left,e.pos[1]+i.top],d.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){d.tooltipHide(e)}),d.on("tooltipHide",function(){f&&e.tooltip.cleanup()}),m.dispatch=d,m.discretebar=t,m.xAxis=n,m.yAxis=r,d3.rebind(m,t,"x","y","xDomain","yDomain","forceX","forceY","id","showValues","valueFormat"),m.margin=function(e){return arguments.length?(i.top=typeof e.top!="undefined"?e.top:i.top,i.right=typeof e.right!="undefined"?e.right:i.right,i.bottom=typeof e.bottom!="undefined"?e.bottom:i.bottom,i.left=typeof e.left!="undefined"?e.left:i.left,m):i},m.width=function(e){return arguments.length?(s=e,m):s},m.height=function(e){return arguments.length?(o=e,m):o},m.color=function(n){return arguments.length?(u=e.utils.getColor(n),t.color(u),m):u},m.staggerLabels=function(e){return arguments.length?(a=e,m):a},m.tooltips=function(e){return arguments.length?(f=e,m):f},m.tooltipContent=function(e){return arguments.length?(l=e,m):l},m.noData=function(e){return arguments.length?(p=e,m):p},m},e.models.distribution=function(){function l(e){return e.each(function(e){var a=n-(i==="x"?t.left+t.right:t.top+t.bottom),l=i=="x"?"y":"x",c=d3.select(this);f=f||u;var h=c.selectAll("g.nv-distribution").data([e]),p=h.enter().append("g").attr("class","nvd3 nv-distribution"),d=p.append("g"),v=h.select("g");h.attr("transform","translate("+t.left+","+t.top+")");var m=v.selectAll("g.nv-dist").data(function(e){return e},function(e){return e.key});m.enter().append("g"),m.attr("class",function(e,t){return"nv-dist nv-series-"+t}).style("stroke",function(e,t){return o(e,t)});var g=m.selectAll("line.nv-dist"+i).data(function(e){return e.values});g.enter().append("line").attr(i+"1",function(e,t){return f(s(e,t))}).attr(i+"2",function(e,t){return f(s(e,t))}),d3.transition(m.exit().selectAll("line.nv-dist"+i)).attr(i+"1",function(e,t){return u(s(e,t))}).attr(i+"2",function(e,t){return u(s(e,t))}).style("stroke-opacity",0).remove(),g.attr("class",function(e,t){return"nv-dist"+i+" nv-dist"+i+"-"+t}).attr(l+"1",0).attr(l+"2",r),d3.transition(g).attr(i+"1",function(e,t){return u(s(e,t))}).attr(i+"2",function(e,t){return u(s(e,t))}),f=u.copy()}),l}var t={top:0,right:0,bottom:0,left:0},n=400,r=8,i="x",s=function(e){return e[i]},o=e.utils.defaultColor(),u=d3.scale.linear(),a,f;return l.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,l):t},l.width=function(e){return arguments.length?(n=e,l):n},l.axis=function(e){return arguments.length?(i=e,l):i},l.size=function(e){return arguments.length?(r=e,l):r},l.getData=function(e){return arguments.length?(s=d3.functor(e),l):s},l.scale=function(e){return arguments.length?(u=e,l):u},l.color=function(t){return arguments.length?(o=e.utils.getColor(t),l):o},l},e.models.indentedTree=function(){function d(e){return e.each(function(t){function N(e,t,n){d3.event.stopPropagation();if(d3.event.shiftKey&&!n)return d3.event.shiftKey=!1,e.values&&e.values.forEach(function(e){(e.values||e._values)&&N(e,0,!0)}),!0;if(!L(e))return!0;e.values?(e._values=e.values,e.values=null):(e.values=e._values,e._values=null),d.update()}function C(e){return e._values&&e._values.length?c:e.values&&e.values.length?h:""}function k(e){return e._values&&e._values.length}function L(e){var t=e.values||e._values;return t&&t.length}var n=0,i=1,s=d3.layout.tree().children(function(e){return e.values}).size([r,a]);d.update=function(){e.transition().call(d)},d.container=this,t[0].key||(t[0].key=u);var v=s.nodes(t[0]),m=d3.select(this).selectAll("div").data([[v]]),g=m.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),y=g.append("table"),b=m.select("table").attr("width","100%").attr("class",l);if(o){var w=y.append("thead"),E=w.append("tr");f.forEach(function(e){E.append("th").attr("width",e.width?e.width:"10%").style("text-align",e.type=="numeric"?"right":"left").append("span").text(e.label)})}var S=b.selectAll("tbody").data(function(e){return e});S.enter().append("tbody"),i=d3.max(v,function(e){return e.depth}),s.size([r,i*a]);var x=S.selectAll("tr").data(function(e){return e},function(e){return e.id||e.id==++n});x.exit().remove(),x.select("img.nv-treeicon").attr("src",C).classed("folded",k);var T=x.enter().append("tr");f.forEach(function(e,t){var n=T.append("td").style("padding-left",function(e){return(t?0:e.depth*a+12+(C(e)?0:16))+"px"},"important").style("text-align",e.type=="numeric"?"right":"left");t==0&&n.append("img").classed("nv-treeicon",!0).classed("nv-folded",k).attr("src",C).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(e){return C(e)?"inline-block":"none"}).on("click",N),n.append("span").attr("class",d3.functor(e.classes)).text(function(t){return e.format?e.format(t):t[e.key]||"-"}),e.showCount&&n.append("span").attr("class","nv-childrenCount").text(function(e){return e.values&&e.values.length||e._values&&e._values.length?"("+(e.values&&e.values.length||e._values&&e._values.length)+")":""}),e.click&&n.select("span").on("click",e.click)}),x.order().on("click",function(e){p.elementClick({row:this,data:e,pos:[e.x,e.y]})}).on("dblclick",function(e){p.elementDblclick({row:this,data:e,pos:[e.x,e.y]})}).on("mouseover",function(e){p.elementMouseover({row:this,data:e,pos:[e.x,e.y]})}).on("mouseout",function(e){p.elementMouseout({row:this,data:e,pos:[e.x,e.y]})})}),d}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=e.utils.defaultColor(),s=Math.floor(Math.random()*1e4),o=!0,u="No Data Available.",a=20,f=[{key:"key",label:"Name",type:"text"}],l=null,c="images/grey-plus.png",h="images/grey-minus.png",p=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout");return d.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,d):t},d.width=function(e){return arguments.length?(n=e,d):n},d.height=function(e){return arguments.length?(r=e,d):r},d.color=function(t){return arguments.length?(i=e.utils.getColor(t),scatter.color(i),d):i},d.id=function(e){return arguments.length?(s=e,d):s},d.header=function(e){return arguments.length?(o=e,d):o},d.noData=function(e){return arguments.length?(u=e,d):u},d.columns=function(e){return arguments.length?(f=e,d):f},d.tableClass=function(e){return arguments.length?(l=e,d):l},d.iconOpen=function(e){return arguments.length?(c=e,d):c},d.iconClose=function(e){return arguments.length?(h=e,d):h},d},e.models.legend=function(){function a(e){return e.each(function(e){var a=n-t.left-t.right,f=d3.select(this),l=f.selectAll("g.nv-legend").data([e]),c=l.enter().append("g").attr("class","nvd3 nv-legend").append("g"),h=l.select("g");l.attr("transform","translate("+t.left+","+t.top+")");var p=h.selectAll(".nv-series").data(function(e){return e}),d=p.enter().append("g").attr("class","nv-series").on("mouseover",function(e,t){u.legendMouseover(e,t)}).on("mouseout",function(e,t){u.legendMouseout(e,t)}).on("click",function(e,t){u.legendClick(e,t)}).on("dblclick",function(e,t){u.legendDblclick(e,t)});d.append("circle").style("stroke-width",2).attr("r",5),d.append("text").attr("text-anchor","start").attr("dy",".32em").attr("dx","8"),p.classed("disabled",function(e){return e.disabled}),p.exit().remove(),p.select("circle").style("fill",function(e,t){return e.color||s(e,t)}).style("stroke",function(e,t){return e.color||s(e,t)}),p.select("text").text(i);if(o){var v=[];p.each(function(e,t){v.push(d3.select(this).select("text").node().getComputedTextLength()+28)});var m=0,g=0,y=[];while(g<a&&m<v.length)y[m]=v[m],g+=v[m++];while(g>a&&m>1){y=[],m--;for(k=0;k<v.length;k++)v[k]>(y[k%m]||0)&&(y[k%m]=v[k]);g=y.reduce(function(e,t,n,r){return e+t})}var b=[];for(var w=0,E=0;w<m;w++)b[w]=E,E+=y[w];p.attr("transform",function(e,t){return"translate("+b[t%m]+","+(5+Math.floor(t/m)*20)+")"}),h.attr("transform","translate("+(n-t.right-g)+","+t.top+")"),r=t.top+t.bottom+Math.ceil(v.length/m)*20}else{var S=5,x=5,T=0,N;p.attr("transform",function(e,r){var i=d3.select(this).select("text").node().getComputedTextLength()+28;return N=x,n<t.left+t.right+N+i&&(x=N=5,S+=20),x+=i,x>T&&(T=x),"translate("+N+","+S+")"}),h.attr("transform","translate("+(n-t.right-T)+","+t.top+")"),r=t.top+t.bottom+S+15}}),a}var t={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(e){return e.key},s=e.utils.defaultColor(),o=!0,u=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout");return a.dispatch=u,a.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,a):t},a.width=function(e){return arguments.length?(n=e,a):n},a.height=function(e){return arguments.length?(r=e,a):r},a.key=function(e){return arguments.length?(i=e,a):i},a.color=function(t){return arguments.length?(s=e.utils.getColor(t),a):s},a.align=function(e){return arguments.length?(o=e,a):o},a},e.models.line=function(){function g(e){return e.each(function(e){var g=n-t.left-t.right,b=r-t.top-t.bottom,w=d3.select(this);c=d.xScale(),h=d.yScale(),v=v||c,m=m||h;var E=w.selectAll("g.nv-wrap.nv-line").data([e]),S=E.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),T=S.append("defs"),N=S.append("g"),C=E.select("g");N.append("g").attr("class","nv-groups"),N.append("g").attr("class","nv-scatterWrap"),E.attr("transform","translate("+t.left+","+t.top+")"),d.width(g).height(b);var k=E.select(".nv-scatterWrap");d3.transition(k).call(d),T.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect"),E.select("#nv-edge-clip-"+s+" rect").attr("width",g).attr("height",b),C.attr("clip-path",l?"url(#nv-edge-clip-"+s+")":""),k.attr("clip-path",l?"url(#nv-edge-clip-"+s+")":"");var L=E.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});L.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(L.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),L.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return i(e,t)}).style("stroke",function(e,t){return i(e,t)}),d3.transition(L).style("stroke-opacity",1).style("fill-opacity",.5);var A=L.selectAll("path.nv-area").data(function(e){return f(e)?[e]:[]});A.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(p).defined(a).x(function(e,t){return v(o(e,t))}).y0(function(e,t){return m(u(e,t))}).y1(function(e,t){return m(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[e.values])}),d3.transition(L.exit().selectAll("path.nv-area")).attr("d",function(e){return d3.svg.area().interpolate(p).defined(a).x(function(e,t){return v(o(e,t))}).y0(function(e,t){return m(u(e,t))}).y1(function(e,t){return m(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[e.values])}),d3.transition(A).attr("d",function(e){return d3.svg.area().interpolate(p).defined(a).x(function(e,t){return v(o(e,t))}).y0(function(e,t){return m(u(e,t))}).y1(function(e,t){return m(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[e.values])});var O=L.selectAll("path.nv-line").data(function(e){return[e.values]});O.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(p).defined(a).x(function(e,t){return v(o(e,t))}).y(function(e,t){return m(u(e,t))})),d3.transition(L.exit().selectAll("path.nv-line")).attr("d",d3.svg.line().interpolate(p).defined(a).x(function(e,t){return c(o(e,t))}).y(function(e,t){return h(u(e,t))})),d3.transition(O).attr("d",d3.svg.line().interpolate(p).defined(a).x(function(e,t){return c(o(e,t))}).y(function(e,t){return h(u(e,t))})),v=c.copy(),m=h.copy()}),g}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=e.utils.defaultColor(),s=Math.floor(Math.random()*1e4),o=function(e){return e.x},u=function(e){return e.y},a=function(e,t){return!isNaN(u(e,t))&&u(e,t)!==null},f=function(e){return e.area},l=!1,c,h,p="linear",d=e.models.scatter();d.id(s).size(16).sizeDomain([16,256]);var v,m;return g.dispatch=d.dispatch,g.scatter=d,d3.rebind(g,d,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius"),g.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,g):t},g.width=function(e){return arguments.length?(n=e,g):n},g.height=function(e){return arguments.length?(r=e,g):r},g.x=function(e){return arguments.length?(o=e,d.x(e),g):o},g.y=function(e){return arguments.length?(u=e,d.y(e),g):u},g.clipEdge=function(e){return arguments.length?(l=e,g):l},g.color=function(t){return arguments.length?(i=e.utils.getColor(t),d.color(i),g):i},g.id=function(e){return arguments.length?(s=e,g):s},g.interpolate=function(e){return arguments.length?(p=e,g):p},g.defined=function(e){return arguments.length?(a=e,g):a},g.isArea=function(e){return arguments.length?(f=d3.functor(e),g):f},g},e.models.lineChart=function(){function g(e){return e.each(function(c){var b=d3.select(this),w=this,E=(u||parseInt(b.style("width"))||960)-s.left-s.right,S=(a||parseInt(b.style("height"))||400)-s.top-s.bottom;g.update=function(){g(e)},g.container=this;if(!c||!c.length||!c.filter(function(e){return e.values.length}).length){var T=b.selectAll(".nv-noData").data([d]);return T.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),T.attr("x",s.left+E/2).attr("y",s.top+S/2).text(function(e){return e}),g}b.selectAll(".nv-noData").remove(),h=t.xScale(),p=t.yScale();var N=b.selectAll("g.nv-wrap.nv-lineChart").data([c]),C=N.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),k=N.select("g");C.append("g").attr("class","nv-x nv-axis"),C.append("g").attr("class","nv-y nv-axis"),C.append("g").attr("class","nv-linesWrap"),C.append("g").attr("class","nv-legendWrap"),f&&(i.width(E),k.select(".nv-legendWrap").datum(c).call(i),s.top!=i.height()&&(s.top=i.height(),S=(a||parseInt(b.style("height"))||400)-s.top-s.bottom),N.select(".nv-legendWrap").attr("transform","translate(0,"+ -s.top+")")),N.attr("transform","translate("+s.left+","+s.top+")"),t.width(E).height(S).color(c.map(function(e,t){return e.color||o(e,t)}).filter(function(e,t){return!c[t].disabled}));var L=k.select(".nv-linesWrap").datum(c.filter(function(e){return!e.disabled}));d3.transition(L).call(t),n.scale(h).ticks(E/100).tickSize(-S,0),k.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")"),d3.transition(k.select(".nv-x.nv-axis")).call(n),r.scale(p).ticks(S/36).tickSize(-E,0),d3.transition(k.select(".nv-y.nv-axis")).call(r),i.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,c.filter(function(e){return!e.disabled}).length||c.map(function(e){return e.disabled=!1,N.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(g)}),v.on("tooltipShow",function(e){l&&m(e,w.parentNode)})}),g}var t=e.models.line(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s={top:30,right:20,bottom:50,left:60},o=e.utils.defaultColor(),u=null,a=null,f=!0,l=!0,c=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},h,p,d="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide");n.orient("bottom").tickPadding(5),r.orient("left");var m=function(i,s){if(s){var o=d3.select(s).select("svg"),u=o.attr("viewBox");if(u){u=u.split(" ");var a=parseInt(o.style("width"))/u[2];i.pos[0]=i.pos[0]*a,i.pos[1]=i.pos[1]*a}}var f=i.pos[0]+(s.offsetLeft||0),l=i.pos[1]+(s.offsetTop||0),h=n.tickFormat()(t.x()(i.point,i.pointIndex)),p=r.tickFormat()(t.y()(i.point,i.pointIndex)),d=c(i.series.key,h,p,i,g);e.tooltip.show([f,l],d,null,null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+s.left,e.pos[1]+s.top],v.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){v.tooltipHide(e)}),v.on("tooltipHide",function(){l&&e.tooltip.cleanup()}),g.dispatch=v,g.lines=t,g.legend=i,g.xAxis=n,g.yAxis=r,d3.rebind(g,t,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate"),g.margin=function(e){return arguments.length?(s.top=typeof e.top!="undefined"?e.top:s.top,s.right=typeof e.right!="undefined"?e.right:s.right,s.bottom=typeof e.bottom!="undefined"?e.bottom:s.bottom,s.left=typeof e.left!="undefined"?e.left:s.left,g):s},g.width=function(e){return arguments.length?(u=e,g):u},g.height=function(e){return arguments.length?(a=e,g):a},g.color=function(t){return arguments.length?(o=e.utils.getColor(t),i.color(o),g):o},g.showLegend=function(e){return arguments.length?(f=e,g):f},g.tooltips=function(e){return arguments.length?(l=e,g):l},g.tooltipContent=function(e){return arguments.length?(c=e,g):c},g.noData=function(e){return arguments.length?(d=e,g):d},g},e.models.linePlusBarChart=function(){function S(e){return e.each(function(v){var T=d3.select(this),N=this,C=(a||parseInt(T.style("width"))||960)-u.left-u.right,k=(f||parseInt(T.style("height"))||400)-u.top-u.bottom;S.update=function(){S(e)},S.container=this;if(!v||!v.length||!v.filter(function(e){return e.values.length}).length){var L=T.selectAll(".nv-noData").data([b]);return L.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),L.attr("x",u.left+C/2).attr("y",u.top+k/2).text(function(e){return e}),S}T.selectAll(".nv-noData").remove(),g=n.yScale(),y=t.yScale();var A=v.filter(function(e){return!e.disabled&&e.bar}),O=v.filter(function(e){return!e.disabled&&!e.bar}),M=v.filter(function(e){return!e.disabled&&e.bar}).map(function(e){return e.values.map(function(e,t){return{x:l(e,t),y:c(e,t)}})}),_=v.filter(function(e){return!e.disabled&&!e.bar}).map(function(e){return e.values.map(function(e,t){return{x:l(e,t),y:c(e,t)}})});m.domain(d3.extent(d3.merge(M.concat(_)),function(e){return e.x})).range([0,C]);var D=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([v]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),H=D.select("g");P.append("g").attr("class","nv-x nv-axis"),P.append("g").attr("class","nv-y1 nv-axis"),P.append("g").attr("class","nv-y2 nv-axis"),P.append("g").attr("class","nv-barsWrap"),P.append("g").attr("class","nv-linesWrap"),P.append("g").attr("class","nv-legendWrap"),p&&(o.width(C/2),H.select(".nv-legendWrap").datum(v.map(function(e){return e.originalKey=e.originalKey===undefined?e.key:e.originalKey,e.key=e.originalKey+(e.bar?" (left axis)":" (right axis)"),e})).call(o),u.top!=o.height()&&(u.top=o.height(),k=(f||parseInt(T.style("height"))||400)-u.top-u.bottom),H.select(".nv-legendWrap").attr("transform","translate("+C/2+","+ -u.top+")")),D.attr("transform","translate("+u.left+","+u.top+")"),t.width(C).height(k).color(v.map(function(e,t){return e.color||h(e,t)}).filter(function(e,t){return!v[t].disabled&&!v[t].bar})),n.width(C).height(k).color(v.map(function(e,t){return e.color||h(e,t)}).filter(function(e,t){return!v[t].disabled&&v[t].bar}));var B=H.select(".nv-barsWrap").datum(A.length?A:[{values:[]}]),j=H.select(".nv-linesWrap").datum(O.length?O:[{values:[]}]);d3.transition(B).call(n),d3.transition(j).call(t),r.scale(m).ticks(C/100).tickSize(-k,0),H.select(".nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")"),d3.transition(H.select(".nv-x.nv-axis")).call(r),i.scale(g).ticks(k/36).tickSize(-C,0),d3.transition(H.select(".nv-y1.nv-axis")).style("opacity",A.length?1:0).call(i),s.scale(y).ticks(k/36).tickSize(A.length?0:-C,0),H.select(".nv-y2.nv-axis").style("opacity",O.length?1:0).attr("transform","translate("+m.range()[1]+",0)"),d3.transition(H.select(".nv-y2.nv-axis")).call(s),o.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,v.filter(function(e){return!e.disabled}).length||v.map(function(e){return e.disabled=!1,D.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(S)}),w.on("tooltipShow",function(e){d&&E(e,N.parentNode)})}),S}var t=e.models.line(),n=e.models.historicalBar(),r=e.models.axis(),i=e.models.axis(),s=e.models.axis(),o=e.models.legend(),u={top:30,right:60,bottom:50,left:60},a=null,f=null,l=function(e){return e.x},c=function(e){return e.y},h=e.utils.defaultColor(),p=!0,d=!0,v=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},m=d3.scale.linear(),g,y,b="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide");r.orient("bottom").tickPadding(5),i.orient("left"),s.orient("right");var E=function(n,o){var u=n.pos[0]+(o.offsetLeft||0),a=n.pos[1]+(o.offsetTop||0),f=r.tickFormat()(t.x()(n.point,n.pointIndex)),l=(n.series.bar?i:s).tickFormat()(t.y()(n.point,n.pointIndex)),c=v(n.series.key,f,l,n,S);e.tooltip.show([u,a],c,n.value<0?"n":"s",null,o)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+u.left,e.pos[1]+u.top],w.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){w.tooltipHide(e)}),n.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+u.left,e.pos[1]+u.top],w.tooltipShow(e)}),n.dispatch.on("elementMouseout.tooltip",function(e){w.tooltipHide(e)}),w.on("tooltipHide",function(){d&&e.tooltip.cleanup()}),S.dispatch=w,S.legend=o,S.lines=t,S.bars=n,S.xAxis=r,S.y1Axis=i,S.y2Axis=s,d3.rebind(S,t,"defined","size","clipVoronoi","interpolate"),S.x=function(e){return arguments.length?(l=e,t.x(e),n.x(e),S):l},S.y=function(e){return arguments.length?(c=e,t.y(e),n.y(e),S):c},S.margin=function(e){return arguments.length?(u.top=typeof e.top!="undefined"?e.top:u.top,u.right=typeof e.right!="undefined"?e.right:u.right,u.bottom=typeof e.bottom!="undefined"?e.bottom:u.bottom,u.left=typeof e.left!="undefined"?e.left:u.left,S):u},S.width=function(e){return arguments.length?(a=e,S):a},S.height=function(e){return arguments.length?(f=e,S):f},S.color=function(t){return arguments.length?(h=e.utils.getColor(t),o.color(h),S):h},S.showLegend=function(e){return arguments.length?(p=e,S):p},S.tooltips=function(e){return arguments.length?(d=e,S):d},S.tooltipContent=function(e){return arguments.length?(v=e,S):v},S.noData=function(e){return arguments.length?(b=e,S):b},S},e.models.lineWithFocusChart=function(){function C(e){return e.each(function(S){function R(e){var t=+(e=="e"),n=t?1:-1,r=M/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function U(){a.empty()||a.extent(w),I.data([a.empty()?g.domain():w]).each(function(e,t){var n=g(e[0])-v.range()[0],r=v.range()[1]-g(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",g(e[1])).attr("width",r<0?0:r)})}function z(){w=a.empty()?null:a.extent(),extent=a.empty()?g.domain():a.extent(),T.brush({extent:extent,brush:a}),U();var e=H.select(".nv-focus .nv-linesWrap").datum(S.filter(function(e){return!e.disabled}).map(function(e,n){return{key:e.key,values:e.values.filter(function(e,n){return t.x()(e,n)>=extent[0]&&t.x()(e,n)<=extent[1]})}}));d3.transition(e).call(t),d3.transition(H.select(".nv-focus .nv-x.nv-axis")).call(r),d3.transition(H.select(".nv-focus .nv-y.nv-axis")).call(i)}var k=d3.select(this),L=this,A=(h||parseInt(k.style("width"))||960)-f.left-f.right,O=(p||parseInt(k.style("height"))||400)-f.top-f.bottom-d,M=d-l.top-l.bottom;C.update=function(){C(e)},C.container=this;if(!S||!S.length||!S.filter(function(e){return e.values.length}).length){var _=k.selectAll(".nv-noData").data([x]);return _.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),_.attr("x",f.left+A/2).attr("y",f.top+availableHeight/2).text(function(e){return e}),C}k.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale(),g=n.xScale(),y=n.yScale();var D=k.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([S]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),H=D.select("g");P.append("g").attr("class","nv-legendWrap");var B=P.append("g").attr("class","nv-focus");B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-linesWrap");var j=P.append("g").attr("class","nv-context");j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis"),j.append("g").attr("class","nv-linesWrap"),j.append("g").attr("class","nv-brushBackground"),j.append("g").attr("class","nv-x nv-brush"),b&&(u.width(A),H.select(".nv-legendWrap").datum(S).call(u),f.top!=u.height()&&(f.top=u.height(),O=(p||parseInt(k.style("height"))||400)-f.top-f.bottom-d),H.select(".nv-legendWrap").attr("transform","translate(0,"+ -f.top+")")),D.attr("transform","translate("+f.left+","+f.top+")"),t.width(A).height(O).color(S.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!S[t].disabled})),n.defined(t.defined()).width(A).height(M).color(S.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!S[t].disabled})),H.select(".nv-context").attr("transform","translate(0,"+(O+f.bottom+l.top)+")");var F=H.select(".nv-context .nv-linesWrap").datum(S.filter(function(e){return!e.disabled}));d3.transition(F).call(n),r.scale(v).ticks(A/100).tickSize(-O,0),i.scale(m).ticks(O/36).tickSize(-A,0),H.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+O+")"),a.x(g).on("brush",z),w&&a.extent(w);var I=H.select(".nv-brushBackground").selectAll("g").data([w||a.extent()]),q=I.enter().append("g");q.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",M),q.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",M),gBrush=H.select(".nv-x.nv-brush").call(a),gBrush.selectAll("rect").attr("height",M),gBrush.selectAll(".resize").append("path").attr("d",R),z(),s.scale(g).ticks(A/100).tickSize(-M,0),H.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),d3.transition(H.select(".nv-context .nv-x.nv-axis")).call(s),o.scale(y).ticks(M/36).tickSize(-A,0),d3.transition(H.select(".nv-context .nv-y.nv-axis")).call(o),H.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),u.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,S.filter(function(e){return!e.disabled}).length||S.map(function(e){return e.disabled=!1,D.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(C)}),T.on("tooltipShow",function(e){E&&N(e,L.parentNode)})}),C}var t=e.models.line(),n=e.models.line(),r=e.models.axis(),i=e.models.axis(),s=e.models.axis(),o=e.models.axis(),u=e.models.legend(),a=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},l={top:0,right:30,bottom:20,left:60},c=e.utils.defaultColor(),h=null,p=null,d=100,v,m,g,y,b=!0,w=null,E=!0,S=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},x="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","brush");t.clipEdge(!0),n.interactive(!1),r.orient("bottom").tickPadding(5),i.orient("left"),s.orient("bottom").tickPadding(5),o.orient("left");var N=function(n,s){var o=n.pos[0]+(s.offsetLeft||0),u=n.pos[1]+(s.offsetTop||0),a=r.tickFormat()(t.x()(n.point,n.pointIndex)),f=i.tickFormat()(t.y()(n.point,n.pointIndex)),l=S(n.series.key,a,f,n,C);e.tooltip.show([o,u],l,null,null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+f.left,e.pos[1]+f.top],T.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){T.tooltipHide(e)}),T.on("tooltipHide",function(){E&&e.tooltip.cleanup()}),C.dispatch=T,C.legend=u,C.lines=t,C.lines2=n,C.xAxis=r,C.yAxis=i,C.x2Axis=s,C.y2Axis=o,d3.rebind(C,t,"defined","isArea","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),C.x=function(e){return arguments.length?(t.x(e),n.x(e),C):t.x},C.y=function(e){return arguments.length?(t.y(e),n.y(e),C):t.y},C.margin=function(e){return arguments.length?(f.top=typeof e.top!="undefined"?e.top:f.top,f.right=typeof e.right!="undefined"?e.right:f.right,f.bottom=typeof e.bottom!="undefined"?e.bottom:f.bottom,f.left=typeof e.left!="undefined"?e.left:f.left,C):f},C.margin2=function(e){return arguments.length?(l=e,C):l},C.width=function(e){return arguments.length?(h=e,C):h},C.height=function(e){return arguments.length?(p=e,C):p},C.color=function(t){return arguments.length?(c=e.utils.getColor(t),u.color(c),C):c},C.showLegend=function(e){return arguments.length?(b=e,C):b},C.tooltips=function(e){return arguments.length?(E=e,C):E},C.tooltipContent=function(e){return arguments.length?(S=e,C):S},C.interpolate=function(e){return arguments.length?(t.interpolate(e),n.interpolate(e),C):t.interpolate()},C.noData=function(e){return arguments.length?(x=e,C):x},C.xTickFormat=function(e){return arguments.length?(r.tickFormat(e),s.tickFormat(e),C):r.tickFormat()},C.yTickFormat=function(e){return arguments.length?(i.tickFormat(e),o.tickFormat(e),C):i.tickFormat()},C},e.models.multiBar=function(){function b(e){return e.each(function(e){var b=n-t.left-t.right,w=r-t.top-t.bottom,E=d3.select(this);c&&(e=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(e)),e=e.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var S=d&&v?[]:e.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0}})});i.domain(d3.merge(S).map(function(e){return e.x})).rangeBands([0,b],.1),s.domain(v||d3.extent(d3.merge(S).map(function(e){return e.y+(c?e.y0:0)}).concat(f))).range([w,0]);if(i.domain()[0]===i.domain()[1]||s.domain()[0]===s.domain()[1])singlePoint=!0;i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1])),s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]+s.domain()[0]*.01,s.domain()[1]-s.domain()[1]*.01]):s.domain([-1,1])),g=g||i,y=y||s;var T=E.selectAll("g.nv-wrap.nv-multibar").data([e]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),C=N.append("defs"),k=N.append("g"),L=T.select("g");k.append("g").attr("class","nv-groups"),T.attr("transform","translate("+t.left+","+t.top+")"),C.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),T.select("#nv-edge-clip-"+o+" rect").attr("width",b).attr("height",w),L.attr("clip-path",l?"url(#nv-edge-clip-"+o+")":"");var A=T.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});A.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(A.exit()).selectAll("rect.nv-bar").delay(function(t,n){return n*p/e[0].values.length}).attr("y",function(e){return c?y(e.y0):y(0)}).attr("height",0).remove(),A.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return h(e,t)}).style("stroke",function(e,t){return h(e,t)}),d3.transition(A).style("stroke-opacity",1).style("fill-opacity",.75);var O=A.selectAll("rect.nv-bar").data(function(e){return e.values});O.exit().remove();var M=O.enter().append("rect").attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,n,r){return c?0:r*i.rangeBand()/e.length}).attr("y",function(e){return y(c?e.y0:0)}).attr("height",0).attr("width",i.rangeBand()/(c?1:e.length));O.on("mouseover",function(t,n){d3.select(this).classed("hover",!0),m.elementMouseover({value:a(t,n),point:t,series:e[t.series],pos:[i(u(t,n))+i.rangeBand()*(c?e.length/2:t.series+.5)/e.length,s(a(t,n)+(c?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),m.elementMouseout({value:a(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){m.elementClick({value:a(t,n),point:t,series:e[t.series],pos:[i(u(t,n))+i.rangeBand()*(c?e.length/2:t.series+.5)/e.length,s(a(t,n)+(c?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){m.elementDblClick({value:a(t,n),point:t,series:e[t.series],pos:[i(u(t,n))+i.rangeBand()*(c?e.length/2:t.series+.5)/e.length,s(a(t,n)+(c?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}),O.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(e,t){return"translate("+i(
u(e,t))+",0)"}),c?d3.transition(O).delay(function(t,n){return n*p/e[0].values.length}).attr("y",function(e,t){return s(a(e,t)+(c?e.y0:0))}).attr("height",function(e,t){return Math.abs(s(e.y+(c?e.y0:0))-s(c?e.y0:0))}).each("end",function(){d3.transition(d3.select(this)).attr("x",function(t,n){return c?0:t.series*i.rangeBand()/e.length}).attr("width",i.rangeBand()/(c?1:e.length))}):d3.transition(O).delay(function(t,n){return n*p/e[0].values.length}).attr("x",function(t,n){return t.series*i.rangeBand()/e.length}).attr("width",i.rangeBand()/e.length).each("end",function(){d3.transition(d3.select(this)).attr("y",function(e,t){return a(e,t)<0?s(0):s(a(e,t))}).attr("height",function(e,t){return Math.abs(s(a(e,t))-s(0))})}),g=i.copy(),y=s.copy()}),b}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=!0,c=!1,h=e.utils.defaultColor(),p=1200,d,v,m=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),g,y;return b.dispatch=m,b.x=function(e){return arguments.length?(u=e,b):u},b.y=function(e){return arguments.length?(a=e,b):a},b.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,b):t},b.width=function(e){return arguments.length?(n=e,b):n},b.height=function(e){return arguments.length?(r=e,b):r},b.xScale=function(e){return arguments.length?(i=e,b):i},b.yScale=function(e){return arguments.length?(s=e,b):s},b.xDomain=function(e){return arguments.length?(d=e,b):d},b.yDomain=function(e){return arguments.length?(v=e,b):v},b.forceY=function(e){return arguments.length?(f=e,b):f},b.stacked=function(e){return arguments.length?(c=e,b):c},b.clipEdge=function(e){return arguments.length?(l=e,b):l},b.color=function(t){return arguments.length?(h=e.utils.getColor(t),b):h},b.id=function(e){return arguments.length?(o=e,b):o},b.delay=function(e){return arguments.length?(p=e,b):p},b},e.models.multiBarChart=function(){function E(e){return e.each(function(v){var S=d3.select(this),T=this,N=(u||parseInt(S.style("width"))||960)-o.left-o.right,C=(a||parseInt(S.style("height"))||400)-o.top-o.bottom;E.update=function(){e.transition().call(E)},E.container=this;if(!v||!v.length||!v.filter(function(e){return e.values.length}).length){var k=S.selectAll(".nv-noData").data([y]);return k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",o.left+N/2).attr("y",o.top+C/2).text(function(e){return e}),E}S.selectAll(".nv-noData").remove(),m=t.xScale(),g=t.yScale();var L=S.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([v]),A=L.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),O=L.select("g");A.append("g").attr("class","nv-x nv-axis"),A.append("g").attr("class","nv-y nv-axis"),A.append("g").attr("class","nv-barsWrap"),A.append("g").attr("class","nv-legendWrap"),A.append("g").attr("class","nv-controlsWrap"),c&&(i.width(N/2),O.select(".nv-legendWrap").datum(v).call(i),o.top!=i.height()&&(o.top=i.height(),C=(a||parseInt(S.style("height"))||400)-o.top-o.bottom),O.select(".nv-legendWrap").attr("transform","translate("+N/2+","+ -o.top+")"));if(l){var M=[{key:"Grouped",disabled:t.stacked()},{key:"Stacked",disabled:!t.stacked()}];s.width(180).color(["#444","#444","#444"]),O.select(".nv-controlsWrap").datum(M).attr("transform","translate(0,"+ -o.top+")").call(s)}L.attr("transform","translate("+o.left+","+o.top+")"),t.width(N).height(C).color(v.map(function(e,t){return e.color||f(e,t)}).filter(function(e,t){return!v[t].disabled}));var _=O.select(".nv-barsWrap").datum(v.filter(function(e){return!e.disabled}));d3.transition(_).call(t),n.scale(m).ticks(N/100).tickSize(-C,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")"),d3.transition(O.select(".nv-x.nv-axis")).call(n);var D=O.select(".nv-x.nv-axis > g").selectAll("g");D.selectAll("line, text").style("opacity",1),h&&D.filter(function(e,t){return t%Math.ceil(v[0].values.length/(N/100))!==0}).selectAll("text, line").style("opacity",0),p&&D.selectAll("text").attr("transform",function(e,t,n){return"rotate("+p+" 0,0)"}).attr("text-transform",p>0?"start":"end"),r.scale(g).ticks(C/36).tickSize(-N,0),d3.transition(O.select(".nv-y.nv-axis")).call(r),i.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,v.filter(function(e){return!e.disabled}).length||v.map(function(e){return e.disabled=!1,L.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(E)}),s.dispatch.on("legendClick",function(n,r){if(!n.disabled)return;M=M.map(function(e){return e.disabled=!0,e}),n.disabled=!1;switch(n.key){case"Grouped":t.stacked(!1);break;case"Stacked":t.stacked(!0)}e.transition().call(E)}),b.on("tooltipShow",function(e){d&&w(e,T.parentNode)})}),E}var t=e.models.multiBar(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.legend(),o={top:30,right:20,bottom:50,left:60},u=null,a=null,f=e.utils.defaultColor(),l=!0,c=!0,h=!0,p=0,d=!0,v=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},m,g,y="No Data Available.",b=d3.dispatch("tooltipShow","tooltipHide");t.stacked(!1),n.orient("bottom").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),r.orient("left").tickFormat(d3.format(",.1f"));var w=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=v(i.series.key,a,f,i,E);e.tooltip.show([o,u],l,i.value<0?"n":"s",null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],b.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){b.tooltipHide(e)}),b.on("tooltipHide",function(){d&&e.tooltip.cleanup()}),E.dispatch=b,E.multibar=t,E.legend=i,E.xAxis=n,E.yAxis=r,d3.rebind(E,t,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","stacked","delay"),E.margin=function(e){return arguments.length?(o.top=typeof e.top!="undefined"?e.top:o.top,o.right=typeof e.right!="undefined"?e.right:o.right,o.bottom=typeof e.bottom!="undefined"?e.bottom:o.bottom,o.left=typeof e.left!="undefined"?e.left:o.left,E):o},E.width=function(e){return arguments.length?(u=e,E):u},E.height=function(e){return arguments.length?(a=e,E):a},E.color=function(t){return arguments.length?(f=e.utils.getColor(t),i.color(f),E):f},E.showControls=function(e){return arguments.length?(l=e,E):l},E.showLegend=function(e){return arguments.length?(c=e,E):c},E.reduceXTicks=function(e){return arguments.length?(h=e,E):h},E.rotateLabels=function(e){return arguments.length?(p=e,E):p},E.tooltip=function(e){return arguments.length?(v=e,E):v},E.tooltips=function(e){return arguments.length?(d=e,E):d},E.tooltipContent=function(e){return arguments.length?(v=e,E):v},E.noData=function(e){return arguments.length?(y=e,E):y},E},e.models.multiBarHorizontal=function(){function E(e){return e.each(function(e){var i=n-t.left-t.right,v=r-t.top-t.bottom,E=d3.select(this);c&&(e=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(e)),e=e.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var S=m&&g?[]:e.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0}})});s.domain(m||d3.merge(S).map(function(e){return e.x})).rangeBands([0,v],.1),o.domain(g||d3.extent(d3.merge(S).map(function(e){return e.y+(c?e.y0:0)}).concat(f))),h&&!c?o.range([o.domain()[0]<0?p:0,i-(o.domain()[1]>0?p:0)]):o.range([0,i]),b=b||s,w=w||d3.scale.linear().domain(o.domain()).range([o(0),o(0)]);var T=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([e]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),C=N.append("defs"),k=N.append("g"),L=T.select("g");k.append("g").attr("class","nv-groups"),T.attr("transform","translate("+t.left+","+t.top+")");var A=T.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});A.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(A.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),A.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return l(e,t)}).style("stroke",function(e,t){return l(e,t)}),d3.transition(A).style("stroke-opacity",1).style("fill-opacity",.75);var O=A.selectAll("g.nv-bar").data(function(e){return e.values});O.exit().remove();var M=O.enter().append("g").attr("transform",function(t,n,r){return"translate("+w(c?t.y0:0)+","+(c?0:r*s.rangeBand()/e.length+s(u(t,n)))+")"});M.append("rect").attr("width",0).attr("height",s.rangeBand()/(c?1:e.length)),O.on("mouseover",function(t,n){d3.select(this).classed("hover",!0),y.elementMouseover({value:a(t,n),point:t,series:e[t.series],pos:[o(a(t,n)+(c?t.y0:0)),s(u(t,n))+s.rangeBand()*(c?e.length/2:t.series+.5)/e.length],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),y.elementMouseout({value:a(t,n),point:t,series:e[t.series],pointIndex:n,seriesIndex:t.series,e:d3.event})}).on("click",function(t,n){y.elementClick({value:a(t,n),point:t,series:e[t.series],pos:[s(u(t,n))+s.rangeBand()*(c?e.length/2:t.series+.5)/e.length,o(a(t,n)+(c?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(t,n){y.elementDblClick({value:a(t,n),point:t,series:e[t.series],pos:[s(u(t,n))+s.rangeBand()*(c?e.length/2:t.series+.5)/e.length,o(a(t,n)+(c?t.y0:0))],pointIndex:n,seriesIndex:t.series,e:d3.event}),d3.event.stopPropagation()}),h&&!c?(M.append("text").attr("text-anchor",function(e,t){return a(e,t)<0?"end":"start"}),O.select("text").attr("y",s.rangeBand()/2).attr("dy","-.32em").text(function(e,t){return d(a(e,t))}),d3.transition(O).select("text").attr("x",function(e,t){return a(e,t)<0?-4:o(a(e,t))-o(0)+4})):O.selectAll("text").remove(),O.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}),c?d3.transition(O).attr("transform",function(e,t){return"translate("+o(e.y0)+","+s(u(e,t))+")"}).select("rect").attr("width",function(e,t){return Math.abs(o(a(e,t)+e.y0)-o(e.y0))}).attr("height",s.rangeBand()):d3.transition(O).attr("transform",function(t,n){return"translate("+(a(t,n)<0?o(a(t,n)):o(0))+","+(t.series*s.rangeBand()/e.length+s(u(t,n)))+")"}).select("rect").attr("height",s.rangeBand()/e.length).attr("width",function(e,t){return Math.abs(o(a(e,t))-o(0))}),b=s.copy(),w=o.copy()}),E}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e4),s=d3.scale.ordinal(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=e.utils.defaultColor(),c=!1,h=!1,p=60,d=d3.format(",.2f"),v=1200,m,g,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),b,w;return E.dispatch=y,E.x=function(e){return arguments.length?(u=e,E):u},E.y=function(e){return arguments.length?(a=e,E):a},E.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,E):t},E.width=function(e){return arguments.length?(n=e,E):n},E.height=function(e){return arguments.length?(r=e,E):r},E.xScale=function(e){return arguments.length?(s=e,E):s},E.yScale=function(e){return arguments.length?(o=e,E):o},E.xDomain=function(e){return arguments.length?(m=e,E):m},E.yDomain=function(e){return arguments.length?(g=e,E):g},E.forceY=function(e){return arguments.length?(f=e,E):f},E.stacked=function(e){return arguments.length?(c=e,E):c},E.color=function(t){return arguments.length?(l=e.utils.getColor(t),E):l},E.id=function(e){return arguments.length?(i=e,E):i},E.delay=function(e){return arguments.length?(v=e,E):v},E.showValues=function(e){return arguments.length?(h=e,E):h},E.valueFormat=function(e){return arguments.length?(d=e,E):d},E.valuePadding=function(e){return arguments.length?(p=e,E):p},E},e.models.multiBarHorizontalChart=function(){function w(e){return e.each(function(h){var d=d3.select(this),E=this,S=(u||parseInt(d.style("width"))||960)-o.left-o.right,T=(a||parseInt(d.style("height"))||400)-o.top-o.bottom;w.update=function(){e.transition().call(w)},w.container=this;if(!h||!h.length||!h.filter(function(e){return e.values.length}).length){var N=d.selectAll(".nv-noData").data([g]);return N.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),N.attr("x",o.left+S/2).attr("y",o.top+T/2).text(function(e){return e}),w}d.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale();var C=d.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([h]),k=C.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),L=C.select("g");k.append("g").attr("class","nv-x nv-axis"),k.append("g").attr("class","nv-y nv-axis"),k.append("g").attr("class","nv-barsWrap"),k.append("g").attr("class","nv-legendWrap"),k.append("g").attr("class","nv-controlsWrap"),c&&(i.width(S/2),L.select(".nv-legendWrap").datum(h).call(i),o.top!=i.height()&&(o.top=i.height(),T=(a||parseInt(d.style("height"))||400)-o.top-o.bottom),L.select(".nv-legendWrap").attr("transform","translate("+S/2+","+ -o.top+")"));if(l){var A=[{key:"Grouped",disabled:t.stacked()},{key:"Stacked",disabled:!t.stacked()}];s.width(180).color(["#444","#444","#444"]),L.select(".nv-controlsWrap").datum(A).attr("transform","translate(0,"+ -o.top+")").call(s)}C.attr("transform","translate("+o.left+","+o.top+")"),t.width(S).height(T).color(h.map(function(e,t){return e.color||f(e,t)}).filter(function(e,t){return!h[t].disabled}));var O=L.select(".nv-barsWrap").datum(h.filter(function(e){return!e.disabled}));d3.transition(O).call(t),n.scale(v).ticks(T/24).tickSize(-S,0),d3.transition(L.select(".nv-x.nv-axis")).call(n);var M=L.select(".nv-x.nv-axis").selectAll("g");M.selectAll("line, text").style("opacity",1),r.scale(m).ticks(S/100).tickSize(-T,0),L.select(".nv-y.nv-axis").attr("transform","translate(0,"+T+")"),d3.transition(L.select(".nv-y.nv-axis")).call(r),i.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,h.filter(function(e){return!e.disabled}).length||h.map(function(e){return e.disabled=!1,C.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(w)}),s.dispatch.on("legendClick",function(n,r){if(!n.disabled)return;A=A.map(function(e){return e.disabled=!0,e}),n.disabled=!1;switch(n.key){case"Grouped":t.stacked(!1);break;case"Stacked":t.stacked(!0)}e.transition().call(w)}),y.on("tooltipShow",function(e){p&&b(e,E.parentNode)})}),w}var t=e.models.multiBarHorizontal(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend().height(30),s=e.models.legend().height(30),o={top:30,right:20,bottom:50,left:60},u=null,a=null,f=e.utils.defaultColor(),l=!0,c=!0,h=!1,p=!0,d=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},v,m,g="No Data Available.",y=d3.dispatch("tooltipShow","tooltipHide");t.stacked(h),n.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),r.orient("bottom").tickFormat(d3.format(",.1f"));var b=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=d(i.series.key,a,f,i,w);e.tooltip.show([o,u],l,i.value<0?"e":"w",null,s)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],y.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){y.tooltipHide(e)}),y.on("tooltipHide",function(){p&&e.tooltip.cleanup()}),w.dispatch=y,w.multibar=t,w.legend=i,w.xAxis=n,w.yAxis=r,d3.rebind(w,t,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","delay","showValues","valueFormat","stacked"),w.margin=function(e){return arguments.length?(o.top=typeof e.top!="undefined"?e.top:o.top,o.right=typeof e.right!="undefined"?e.right:o.right,o.bottom=typeof e.bottom!="undefined"?e.bottom:o.bottom,o.left=typeof e.left!="undefined"?e.left:o.left,w):o},w.width=function(e){return arguments.length?(u=e,w):u},w.height=function(e){return arguments.length?(a=e,w):a},w.color=function(t){return arguments.length?(f=e.utils.getColor(t),i.color(f),w):f},w.showControls=function(e){return arguments.length?(l=e,w):l},w.showLegend=function(e){return arguments.length?(c=e,w):c},w.tooltip=function(e){return arguments.length?(d=e,w):d},w.tooltips=function(e){return arguments.length?(p=e,w):p},w.tooltipContent=function(e){return arguments.length?(d=e,w):d},w.noData=function(e){return arguments.length?(g=e,w):g},w},e.models.multiChart=function(){function T(e){return e.each(function(u){var f=d3.select(this),N=this,C=(r||parseInt(f.style("width"))||960)-t.left-t.right,k=(i||parseInt(f.style("height"))||400)-t.top-t.bottom,L=u.filter(function(e){return!e.disabled&&e.type=="line"&&e.yAxis==1}),A=u.filter(function(e){return!e.disabled&&e.type=="line"&&e.yAxis==2}),O=u.filter(function(e){return!e.disabled&&e.type=="bar"&&e.yAxis==1}),M=u.filter(function(e){return!e.disabled&&e.type=="bar"&&e.yAxis==2}),_=u.filter(function(e){return!e.disabled&&e.type=="area"&&e.yAxis==1}),D=u.filter(function(e){return!e.disabled&&e.type=="area"&&e.yAxis==2}),P=u.filter(function(e){return!e.disabled&&e.yAxis==1}).map(function(e){return e.values.map(function(e,t){return{x:e.x,y:e.y}})}),H=u.filter(function(e){return!e.disabled&&e.yAxis==2}).map(function(e){return e.values.map(function(e,t){return{x:e.x,y:e.y}})});a.domain(d3.extent(d3.merge(P.concat(H)),function(e){return e.x})).range([0,C]);var B=f.selectAll("g.wrap.multiChart").data([u]),j=B.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");j.append("g").attr("class","x axis"),j.append("g").attr("class","y1 axis"),j.append("g").attr("class","y2 axis"),j.append("g").attr("class","lines1Wrap"),j.append("g").attr("class","lines2Wrap"),j.append("g").attr("class","bars1Wrap"),j.append("g").attr("class","bars2Wrap"),j.append("g").attr("class","stack1Wrap"),j.append("g").attr("class","stack2Wrap"),j.append("g").attr("class","legendWrap");var F=B.select("g");s&&(E.width(C/2),F.select(".legendWrap").datum(u.map(function(e){return e.originalKey=e.originalKey===undefined?e.key:e.originalKey,e.key=e.originalKey+(e.yAxis==1?"":" (right axis)"),e})).call(E),t.top!=E.height()&&(t.top=E.height(),k=(i||parseInt(f.style("height"))||400)-t.top-t.bottom),F.select(".legendWrap").attr("transform","translate("+C/2+","+ -t.top+")")),h.width(C).height(k).interpolate("monotone").color(u.map(function(e,t){return e.color||n[t%n.length]}).filter(function(e,t){return!u[t].disabled&&u[t].yAxis==1&&u[t].type=="line"})),p.width(C).height(k).interpolate("monotone").color(u.map(function(e,t){return e.color||n[t%n.length]}).filter(function(e,t){return!u[t].disabled&&u[t].yAxis==2&&u[t].type=="line"})),d.width(C).height(k).color(u.map(function(e,t){return e.color||n[t%n.length]}).filter(function(e,t){return!u[t].disabled&&u[t].yAxis==1&&u[t].type=="bar"})),v.width(C).height(k).color(u.map(function(e,t){return e.color||n[t%n.length]}).filter(function(e,t){return!u[t].disabled&&u[t].yAxis==2&&u[t].type=="bar"})),m.width(C).height(k).color(u.map(function(e,t){return e.color||n[t%n.length]}).filter(function(e,t){return!u[t].disabled&&u[t].yAxis==1&&u[t].type=="area"})),g.width(C).height(k).color(u.map(function(e,t){return e.color||n[t%n.length]}).filter(function(e,t){return!u[t].disabled&&u[t].yAxis==2&&u[t].type=="area"})),F.attr("transform","translate("+t.left+","+t.top+")");var I=F.select(".lines1Wrap").datum(L),q=F.select(".bars1Wrap").datum(O),R=F.select(".stack1Wrap").datum(_),U=F.select(".lines2Wrap").datum(A),z=F.select(".bars2Wrap").datum(M),W=F.select(".stack2Wrap").datum(D),X=_.length?_.map(function(e){return e.values}).reduce(function(e,t){return e.map(function(e,n){return{x:e.x,y:e.y+t[n].y}})}).concat([{x:0,y:0}]):[],V=D.length?D.map(function(e){return e.values}).reduce(function(e,t){return e.map(function(e,n){return{x:e.x,y:e.y+t[n].y}})}).concat([{x:0,y:0}]):[];l.domain(d3.extent(d3.merge(P).concat(X),function(e){return e.y})).range([0,k]),c.domain(d3.extent(d3.merge(H).concat(V),function(e){return e.y})).range([0,k]),h.yDomain(l.domain()),d.yDomain(l.domain()),m.yDomain(l.domain()),p.yDomain(c.domain()),v.yDomain(c.domain()),g.yDomain(c.domain()),_.length&&d3.transition(R).call(m),D.length&&d3.transition(W).call(g),O.length&&d3.transition(q).call(d),M.length&&d3.transition(z).call(v),L.length&&d3.transition(I).call(h),A.length&&d3.transition(U).call(p),y.ticks(C/100).tickSize(-k,0),F.select(".x.axis").attr("transform","translate(0,"+k+")"),d3.transition(F.select(".x.axis")).call(y),b.ticks(k/36).tickSize(-C,0),d3.transition(F.select(".y1.axis")).call(b),w.ticks(k/36).tickSize(-C,0),d3.transition(F.select(".y2.axis")).call(w),F.select(".y2.axis").style("opacity",H.length?1:0).attr("transform","translate("+a.range()[1]+",0)"),E.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,u.filter(function(e){return!e.disabled}).length||u.map(function(e){return e.disabled=!1,B.selectAll(".series").classed("disabled",!1),e}),e.transition().call(T)}),S.on("tooltipShow",function(e){o&&x(e,N.parentNode)})}),T.update=function(){T(e)},T.container=this,T}var t={top:30,right:20,bottom:50,left:60},n=d3.scale.category20().range(),r=null,i=null,s=!0,o=!0,u=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},a,f,a=d3.scale.linear(),l=d3.scale.linear(),c=d3.scale.linear(),h=e.models.line().yScale(l),p=e.models.line().yScale(c),d=e.models.multiBar().stacked(!1).yScale(l),v=e.models.multiBar().stacked(!1).yScale(c),m=e.models.stackedArea().yScale(l),g=e.models.stackedArea().yScale(c),y=e.models.axis().scale(a).orient("bottom").tickPadding(5),b=e.models.axis().scale(l).orient("left"),w=e.models.axis().scale(c).orient("right"),E=e.models.legend().height(30),S=d3.dispatch("tooltipShow","tooltipHide"),x=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=y.tickFormat()(h.x()(t.point,t.pointIndex)),o=(t.series.bar?b:w).tickFormat()(h.y()(t.point,t.pointIndex)),a=u(t.series.key,s,o,t,T);e.tooltip.show([r,i],a,undefined,undefined,n.offsetParent)};return h.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),h.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),p.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),p.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),d.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),d.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),v.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),v.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),m.dispatch.on("tooltipShow",function(e){if(!Math.round(m.y()(e.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),m.dispatch.on("tooltipHide",function(e){S.tooltipHide(e)}),g.dispatch.on("tooltipShow",function(e){if(!Math.round(g.y()(e.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),g.dispatch.on("tooltipHide",function(e){S.tooltipHide(e)}),h.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),h.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),p.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],S.tooltipShow(e)}),p.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),S.on("tooltipHide",function(){o&&e.tooltip.cleanup()}),T.dispatch=S,T.lines1=h,T.lines2=p,T.bars1=d,T.bars2=v,T.stack1=m,T.stack2=g,T.xAxis=y,T.yAxis1=b,T.yAxis2=w,T.x=function(e){return arguments.length?(getX=e,h.x(e),d.x(e),T):getX},T.y=function(e){return arguments.length?(getY=e,h.y(e),d.y(e),T):getY},T.margin=function(e){return arguments.length?(t=e,T):t},T.width=function(e){return arguments.length?(r=e,T):r},T.height=function(e){return arguments.length?(i=e,T):i},T.color=function(e){return arguments.length?(n=e,E.color(e),T):n},T.showLegend=function(e){return arguments.length?(s=e,T):s},T.tooltips=function(e){return arguments.length?(o=e,T):o},T.tooltipContent=function(e){return arguments.length?(u=e,T):u},T},e.models.ohlcBar=function(){function w(e){return e.each(function(e){var m=n-t.left-t.right,w=r-t.top-t.bottom,E=d3.select(this);s.domain(g||d3.extent(e[0].values.map(u).concat(p))).range([0,m]),o.domain(y||[d3.min(e[0].values.map(h).concat(d)),d3.max(e[0].values.map(c).concat(d))]).range([w,0]);if(s.domain()[0]===s.domain()[1]||o.domain()[0]===o.domain()[1])singlePoint=!0;s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]-s.domain()[0]*.01,s.domain()[1]+s.domain()[1]*.01]):s.domain([-1,1])),o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]+o.domain()[0]*.01,o.domain()[1]-o.domain()[1]*.01]):o.domain([-1,1]));var S=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([e[0].values]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),N=T.append("defs"),C=T.append("g"),k=S.select("g");C.append("g").attr("class","nv-ticks"),S.attr("transform","translate("+t.left+","+t.top+")"),E.on("click",function(e,t){b.chartClick({data:e,index:t,pos:d3.event,id:i})}),N.append("clipPath").attr("id","nv-chart-clip-path-"+i).append("rect"),S.select("#nv-chart-clip-path-"+i+" rect").attr("width",m).attr("height",w),k.attr("clip-path",v?"url(#nv-chart-clip-path-"+i+")":"");var L=S.select(".nv-ticks").selectAll(".nv-tick").data(function(e){return e});L.exit().remove();var A=L.enter().append("path").attr("class",function(e,t,n){return(f(e,t)>l(e,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+t}).attr("d",function(t,n){var r=m/e[0].values.length*.9;return"m0,0l0,"+(o(f(t,n))-o(c(t,n)))+"l"+ -r/2+",0l"+r/2+",0l0,"+(o(h(t,n))-o(f(t,n)))+"l0,"+(o(l(t,n))-o(h(t,n)))+"l"+r/2+",0l"+ -r/2+",0z"}).attr("transform",function(e,t){return"translate("+s(u(e,t))+","+o(c(e,t))+")"}).on("mouseover",function(t,n){d3.select(this).classed("hover",!0),b.elementMouseover({point:t,series:e[0],pos:[s(u(t,n)),o(a(t,n))],pointIndex:n,seriesIndex:0,e:d3.event})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),b.elementMouseout({point:t,series:e[0],pointIndex:n,seriesIndex:0,e:d3.event})}).on("click",function(e,t){b.elementClick({value:a(e,t),data:e,index:t,pos:[s(u(e,t)),o(a(e,t))],e:d3.event,id:i}),d3.event.stopPropagation()}).on("dblclick",function(e,t){b.elementDblClick({value:a(e,t),data:e,index:t,pos:[s(u(e,t)),o(a(e,t))],e:d3.event,id:i}),d3.event.stopPropagation()});L.attr("class",function(e,t,n){return(f(e,t)>l(e,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+t}),d3.transition(L).attr("transform",function(e,t){return"translate("+s(u(e,t))+","+o(c(e,t))+")"}).attr("d",function(t,n){var r=m/e[0].values.length*.9;return"m0,0l0,"+(o(f(t,n))-o(c(t,n)))+"l"+ -r/2+",0l"+r/2+",0l0,"+(o(h(t,n))-o(f(t,n)))+"l0,"+(o(l(t,n))-o(h(t,n)))+"l"+r/2+",0l"+ -r/2+",0z"})}),w}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e4),s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=function(e){return e.open},l=function(e){return e.close},c=function(e){return e.high},h=function(e){return e.low},p=[],d=[],v=!0,m=e.utils.defaultColor(),g,y,b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return w.dispatch=b,w.x=function(e){return arguments.length?(u=e,w):u},w.y=function(e){return arguments.length?(a=e,w):a},w.open=function(e){return arguments.length?(f=e,w):f},w.close=function(e){return arguments.length?(l=e,w):l},w.high=function(e){return arguments.length?(c=e,w):c},w.low=function(e){return arguments.length?(h=e,w):h},w.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,w):t},w.width=function(e){return arguments.length?(n=e,w):n},w.height=function(e){return arguments.length?(r=e,w):r},w.xScale=function(e){return arguments.length?(s=e,w):s},w.yScale=function(e){return arguments.length?(o=e,w):o},w.xDomain=function(e){return arguments.length?(g=e,w):g},w.yDomain=function(e){return arguments.length?(y=e,w):y},w.forceX=function(e){return arguments.length?(p=e,w):p},w.forceY=function(e){return arguments.length?(d=e,w):d},w.clipEdge=function(e){return arguments.length?(v=e,w):v},w.color=function(t){return arguments.length?(m=e.utils.getColor(t),w):m},w.id=function(e){return arguments.length?(i=e,w):i},w},e.models.pie=function(){function v(e){return e.each(function(e){function L(e){var t=(e.startAngle+e.endAngle)*90/Math.PI-90;return t>90?t-180:t}function A(e){p||(e.innerRadius=0);var t=d3.interpolate(this._current,e);return this._current=t(0),function(e){return S(t(e))}}function O(e){e.innerRadius=0;var t=d3.interpolate({startAngle:0,endAngle:0},e);return function(e){return S(t(e))}}var f=n-t.left-t.right,v=r-t.top-t.bottom,m=Math.min(f,v)/2,g=d3.select(this),y=g.selectAll(".nv-wrap.nv-pie").data([i(e[0])]),b=y.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+u),w=b.append("g"),E=y.select("g");w.append("g").attr("class","nv-pie"),y.attr("transform","translate("+t.left+","+t.top+")"),E.select(".nv-pie").attr("transform","translate("+f/2+","+v/2+")"),g.on("click",function(e,t){d.chartClick({data:e,index:t,pos:d3.event,id:u})});var S=d3.svg.arc().outerRadius(m-m/5);p&&S.innerRadius(m/2);var x=d3.layout.pie().sort(null).value(function(e){return e.disabled?0:o(e)}),T=y.select(".nv-pie").selectAll(".nv-slice").data(x);T.exit().remove();var N=T.enter().append("g").attr("class","nv-slice").on("mouseover",function(e,t){d3.select(this).classed("hover",!0),d.elementMouseover({label:s(e.data),value:o(e.data),point:e.data,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:u})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),d.elementMouseout({label:s(e.data),value:o(e.data),point:e.data,index:t,id:u})}).on("click",function(e,t){d.elementClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:u}),d3.event.stopPropagation()}).on("dblclick",function(e,t){d.elementDblClick({label:s(e.data),value:o(e.data),point:e.data,index:t,pos:d3.event,id:u}),d3.event.stopPropagation()});T.attr("fill",function(e,t){return a(e,t)}).attr("stroke",function(e,t){return a(e,t)});var C=N.append("path").each(function(e){this._current=e});d3.transition(T.select("path")).attr("d",S).attrTween("d",A);if(l){var k=S;c&&(k=d3.svg.arc().outerRadius(S.outerRadius())),N.append("g").classed("nv-label",!0).each(function(e,t){var n=d3.select(this);n.attr("transform",function(e){return e.outerRadius=m+10,e.innerRadius=m+15,"translate("+k.centroid(e)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor","middle").style("fill","#000")}),T.select(".nv-label").transition().attr("transform",function(e){return e.outerRadius=m+10,e.innerRadius=m+15,"translate("+k.centroid(e)+")"}),T.each(function(e,t){var n=d3.select(this);n.select(".nv-label text").text(function(e,t){var n=(e.endAngle-e.startAngle)/(2*Math.PI);return e.value&&n>h?s(e.data):""});var r=n.select("text").node().getBBox();n.select(".nv-label rect").attr("width",r.width+10).attr("height",r.height+10).attr("transform",function(){return"translate("+[r.x-5,r.y-5]+")"})})}}),v}var t={top:0,right:0,bottom:0,left:0},n=500,r=500,i=function(e){return e.values},s=function(e){return e.x},o=function(e){return e.y},u=Math.floor(Math.random()*1e4),a=e.utils.defaultColor(),f=d3.format(",.2f"),l=!0,c=!1,h=.02,p=!1,d=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return v.dispatch=d,v.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,v):t},v.width=function(
e){return arguments.length?(n=e,v):n},v.height=function(e){return arguments.length?(r=e,v):r},v.values=function(e){return arguments.length?(i=e,v):i},v.x=function(e){return arguments.length?(s=e,v):s},v.y=function(e){return arguments.length?(o=d3.functor(e),v):o},v.showLabels=function(e){return arguments.length?(l=e,v):l},v.donutLabelsOutside=function(e){return arguments.length?(c=e,v):c},v.donut=function(e){return arguments.length?(p=e,v):p},v.id=function(e){return arguments.length?(u=e,v):u},v.color=function(t){return arguments.length?(a=e.utils.getColor(t),v):a},v.valueFormat=function(e){return arguments.length?(f=e,v):f},v.labelThreshold=function(e){return arguments.length?(h=e,v):h},v},e.models.pieChart=function(){function p(e){return e.each(function(u){var a=d3.select(this),f=this,h=(i||parseInt(a.style("width"))||960)-r.left-r.right,d=(s||parseInt(a.style("height"))||400)-r.top-r.bottom;p.update=function(){p(e)},p.container=this;if(!u||!u.length){var v=a.selectAll(".nv-noData").data([l]);return v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",r.left+h/2).attr("y",r.top+d/2).text(function(e){return e}),p}a.selectAll(".nv-noData").remove();var m=a.selectAll("g.nv-wrap.nv-pieChart").data([u]),g=m.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),y=m.select("g");g.append("g").attr("class","nv-pieWrap"),g.append("g").attr("class","nv-legendWrap"),o&&(n.width(h).key(t.x()),m.select(".nv-legendWrap").datum(t.values()(u[0])).call(n),r.top!=n.height()&&(r.top=n.height(),d=(s||parseInt(a.style("height"))||400)-r.top-r.bottom),m.select(".nv-legendWrap").attr("transform","translate(0,"+ -r.top+")")),m.attr("transform","translate("+r.left+","+r.top+")"),t.width(h).height(d);var b=y.select(".nv-pieWrap").datum(u);d3.transition(b).call(t),n.dispatch.on("legendClick",function(n,r,i){n.disabled=!n.disabled,t.values()(u[0]).filter(function(e){return!e.disabled}).length||t.values()(u[0]).map(function(e){return e.disabled=!1,m.selectAll(".nv-series").classed("disabled",!1),e}),e.transition().call(p)}),t.dispatch.on("elementMouseout.tooltip",function(e){c.tooltipHide(e)})}),p}var t=e.models.pie(),n=e.models.legend(),r={top:30,right:20,bottom:20,left:20},i=null,s=null,o=!0,u=e.utils.defaultColor(),a=!0,f=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+t+"</p>"},l="No Data Available.",c=d3.dispatch("tooltipShow","tooltipHide"),h=function(n,r){var i=n.pos[0]+(r&&r.offsetLeft||0),s=n.pos[1]+(r&&r.offsetTop||0),o=t.valueFormat()(t.y()(n.point)),u=f(t.x()(n.point),o,n,p);e.tooltip.show([i,s],u,n.value<0?"n":"s",null,r)};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+r.left,e.pos[1]+r.top],c.tooltipShow(e)}),c.on("tooltipShow",function(e){a&&h(e)}),c.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),p.dispatch=c,p.pie=t,d3.rebind(p,t,"valueFormat","values","x","y","id","showLabels","donutLabelsOutside","donut","labelThreshold"),p.margin=function(e){return arguments.length?(r.top=typeof e.top!="undefined"?e.top:r.top,r.right=typeof e.right!="undefined"?e.right:r.right,r.bottom=typeof e.bottom!="undefined"?e.bottom:r.bottom,r.left=typeof e.left!="undefined"?e.left:r.left,p):r},p.width=function(e){return arguments.length?(i=e,p):i},p.height=function(e){return arguments.length?(s=e,p):s},p.color=function(r){return arguments.length?(u=e.utils.getColor(r),n.color(u),t.color(u),p):u},p.showLegend=function(e){return arguments.length?(o=e,p):o},p.tooltips=function(e){return arguments.length?(a=e,p):a},p.tooltipContent=function(e){return arguments.length?(f=e,p):f},p.noData=function(e){return arguments.length?(l=e,p):l},p},e.models.scatter=function(){function _(e){return e.each(function(e){function R(){if(!m)return!1;var n,r=d3.merge(e.map(function(e,t){return e.values.filter(g).map(function(e,n){return[o(f(e,n))*(Math.random()/1e12+1),u(l(e,n))*(Math.random()/1e12+1),t,n]})}));if(b){F.append("clipPath").attr("id","nv-points-clip-"+s);var i=B.select("#nv-points-clip-"+s).selectAll("circle").data(r);i.enter().append("circle").attr("r",w),i.exit().remove(),i.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}),B.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+s+")")}if(k===!0){var a=d3.geom.voronoi(r).map(function(e,t){return{data:e,series:r[t][2],point:r[t][3]}}),c=B.select(".nv-point-paths").selectAll("path").data(a);c.enter().append("path").attr("class",function(e,t){return"nv-path-"+t}),c.exit().remove(),c.attr("d",function(e){return"M"+e.data.join(",")+"Z"}),n=c}else{var h=r.map(function(e,t){return{data:e,series:r[t][2],point:r[t][3]}});n=B.select(".nv-groups").selectAll(".nv-group").selectAll("path.nv-point").data(h).style("pointer-events","auto")}n.on("click",function(n){var r=e[n.series],i=r.values[n.point];C.elementClick({point:i,series:r,pos:[o(f(i,n.point))+t.left,u(l(i,n.point))+t.top],seriesIndex:n.series,pointIndex:n.point})}).on("mouseover",function(n){var r=e[n.series],i=r.values[n.point];C.elementMouseover({point:i,series:r,pos:[o(f(i,n.point))+t.left,u(l(i,n.point))+t.top],seriesIndex:n.series,pointIndex:n.point})}).on("mouseout",function(t,n){var r=e[t.series],i=r.values[t.point];C.elementMouseout({point:i,series:r,seriesIndex:t.series,pointIndex:t.point})})}var _=n-t.left-t.right,D=r-t.top-t.bottom,P=d3.select(this);e=e.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var H=E&&S&&x?[]:d3.merge(e.map(function(e){return e.values.map(function(e,t){return{x:f(e,t),y:l(e,t),size:c(e,t)}})}));o.domain(E||d3.extent(H.map(function(e){return e.x}).concat(p))).range([0,_]),u.domain(S||d3.extent(H.map(function(e){return e.y}).concat(d))).range([D,0]),a.domain(x||d3.extent(H.map(function(e){return e.size}).concat(v))).range(T||[16,256]);if(o.domain()[0]===o.domain()[1]||u.domain()[0]===u.domain()[1])N=!0;o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]-o.domain()[0]*.01,o.domain()[1]+o.domain()[1]*.01]):o.domain([-1,1])),u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]+u.domain()[0]*.01,u.domain()[1]-u.domain()[1]*.01]):u.domain([-1,1])),L=L||o,A=A||u,O=O||a;var B=P.selectAll("g.nv-wrap.nv-scatter").data([e]),j=B.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+s+(N?" nv-single-point":"")),F=j.append("defs"),I=j.append("g"),q=B.select("g");I.append("g").attr("class","nv-groups"),I.append("g").attr("class","nv-point-paths"),B.attr("transform","translate("+t.left+","+t.top+")"),F.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect"),B.select("#nv-edge-clip-"+s+" rect").attr("width",_).attr("height",D),q.attr("clip-path",y?"url(#nv-edge-clip-"+s+")":"");var U=B.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});U.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(U.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),U.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}),d3.transition(U).style("fill",function(e,t){return i(e,t)}).style("stroke",function(e,t){return i(e,t)}).style("stroke-opacity",1).style("fill-opacity",.5);var W=U.selectAll("path.nv-point").data(function(e){return e.values});W.enter().append("path").attr("transform",function(e,t){return"translate("+L(f(e,t))+","+A(l(e,t))+")"}).attr("d",d3.svg.symbol().type(h).size(function(e,t){return a(c(e,t))})),W.exit().remove(),d3.transition(U.exit().selectAll("path.nv-point")).attr("transform",function(e,t){return"translate("+o(f(e,t))+","+u(l(e,t))+")"}).remove(),W.attr("class",function(e,t){return"nv-point nv-point-"+t}),d3.transition(W).attr("transform",function(e,t){return"translate("+o(f(e,t))+","+u(l(e,t))+")"}).attr("d",d3.svg.symbol().type(h).size(function(e,t){return a(c(e,t))})),clearTimeout(M),M=setTimeout(R,1e3),L=o.copy(),A=u.copy(),O=a.copy()}),_}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=e.utils.defaultColor(),s=Math.floor(Math.random()*1e5),o=d3.scale.linear(),u=d3.scale.linear(),a=d3.scale.linear(),f=function(e){return e.x},l=function(e){return e.y},c=function(e){return e.size},h=function(e){return e.shape||"circle"},p=[],d=[],v=[],m=!0,g=function(e){return!e.notActive},y=!1,b=!0,w=function(){return 25},E=null,S=null,x=null,T=null,N=!1,C=d3.dispatch("elementClick","elementMouseover","elementMouseout"),k=!0,L,A,O,M;return C.on("elementMouseover.point",function(e){m&&d3.select(".nv-chart-"+s+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!0)}),C.on("elementMouseout.point",function(e){m&&d3.select(".nv-chart-"+s+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!1)}),_.dispatch=C,_.x=function(e){return arguments.length?(f=d3.functor(e),_):f},_.y=function(e){return arguments.length?(l=d3.functor(e),_):l},_.size=function(e){return arguments.length?(c=d3.functor(e),_):c},_.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,_):t},_.width=function(e){return arguments.length?(n=e,_):n},_.height=function(e){return arguments.length?(r=e,_):r},_.xScale=function(e){return arguments.length?(o=e,_):o},_.yScale=function(e){return arguments.length?(u=e,_):u},_.zScale=function(e){return arguments.length?(a=e,_):a},_.xDomain=function(e){return arguments.length?(E=e,_):E},_.yDomain=function(e){return arguments.length?(S=e,_):S},_.sizeDomain=function(e){return arguments.length?(x=e,_):x},_.sizeRange=function(e){return arguments.length?(T=e,_):T},_.forceX=function(e){return arguments.length?(p=e,_):p},_.forceY=function(e){return arguments.length?(d=e,_):d},_.forceSize=function(e){return arguments.length?(v=e,_):v},_.interactive=function(e){return arguments.length?(m=e,_):m},_.pointActive=function(e){return arguments.length?(g=e,_):g},_.clipEdge=function(e){return arguments.length?(y=e,_):y},_.clipVoronoi=function(e){return arguments.length?(b=e,_):b},_.useVoronoi=function(e){return arguments.length?(k=e,k===!1&&(b=!1),_):k},_.clipRadius=function(e){return arguments.length?(w=e,_):w},_.color=function(t){return arguments.length?(i=e.utils.getColor(t),_):i},_.shape=function(e){return arguments.length?(h=e,_):h},_.id=function(e){return arguments.length?(s=e,_):s},_.singlePoint=function(e){return arguments.length?(N=e,_):N},_},e.models.scatterChart=function(){function O(e){return e.each(function(E){function F(){if(b)return j.select(".nv-point-paths").style("pointer-events","all"),!1;j.select(".nv-point-paths").style("pointer-events","none");var e=d3.mouse(this);h.distortion(y).focus(e[0]),p.distortion(y).focus(e[1]),j.select(".nv-scatterWrap").datum(E.filter(function(e){return!e.disabled})).call(t),j.select(".nv-x.nv-axis").call(n),j.select(".nv-y.nv-axis").call(r),j.select(".nv-distributionX").datum(E.filter(function(e){return!e.disabled})).call(o),j.select(".nv-distributionY").datum(E.filter(function(e){return!e.disabled})).call(u)}var S=d3.select(this),x=this,M=(f||parseInt(S.style("width"))||960)-a.left-a.right,_=(l||parseInt(S.style("height"))||400)-a.top-a.bottom;O.update=function(){O(e)},O.container=this;if(!E||!E.length||!E.filter(function(e){return e.values.length}).length){var D=S.selectAll(".nv-noData").data([N]);return D.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),D.attr("x",a.left+M/2).attr("y",a.top+_/2).text(function(e){return e}),O}S.selectAll(".nv-noData").remove(),h=t.xScale(),p=t.yScale(),C=C||h,k=k||p;var P=S.selectAll("g.nv-wrap.nv-scatterChart").data([E]),H=P.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+t.id()),B=H.append("g"),j=P.select("g");B.append("rect").attr("class","nvd3 nv-background"),B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-scatterWrap"),B.append("g").attr("class","nv-distWrap"),B.append("g").attr("class","nv-legendWrap"),B.append("g").attr("class","nv-controlsWrap"),P.attr("transform","translate("+a.left+","+a.top+")"),m&&(i.width(M/2),P.select(".nv-legendWrap").datum(E).call(i),a.top!=i.height()&&(a.top=i.height(),_=(l||parseInt(S.style("height"))||400)-a.top-a.bottom),P.select(".nv-legendWrap").attr("transform","translate("+M/2+","+ -a.top+")")),g&&(s.width(180).color(["#444"]),j.select(".nv-controlsWrap").datum(A).attr("transform","translate(0,"+ -a.top+")").call(s)),t.width(M).height(_).color(E.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!E[t].disabled})),P.select(".nv-scatterWrap").datum(E.filter(function(e){return!e.disabled})).call(t),n.scale(h).ticks(n.ticks()?n.ticks():M/100).tickSize(-_,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(n),r.scale(p).ticks(r.ticks()?r.ticks():_/36).tickSize(-M,0),j.select(".nv-y.nv-axis").call(r),d&&(o.getData(t.x()).scale(h).width(M).color(E.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!E[t].disabled})),B.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),j.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(E.filter(function(e){return!e.disabled})).call(o)),v&&(u.getData(t.y()).scale(p).width(_).color(E.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!E[t].disabled})),B.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),j.select(".nv-distributionY").attr("transform","translate(-"+u.size()+",0)").datum(E.filter(function(e){return!e.disabled})).call(u)),d3.fisheye&&(j.select(".nv-background").attr("width",M).attr("height",_),j.select(".nv-background").on("mousemove",F),j.select(".nv-background").on("click",function(){b=!b}),t.dispatch.on("elementClick.freezeFisheye",function(){b=!b})),s.dispatch.on("legendClick",function(i,s){i.disabled=!i.disabled,y=i.disabled?0:2.5,j.select(".nv-background").style("pointer-events",i.disabled?"none":"all"),j.select(".nv-point-paths").style("pointer-events",i.disabled?"all":"none"),i.disabled?(h.distortion(y).focus(0),p.distortion(y).focus(0),j.select(".nv-scatterWrap").call(t),j.select(".nv-x.nv-axis").call(n),j.select(".nv-y.nv-axis").call(r)):b=!1,O(e)}),i.dispatch.on("legendClick",function(t,n,r){t.disabled=!t.disabled,E.filter(function(e){return!e.disabled}).length||E.map(function(e){return e.disabled=!1,P.selectAll(".nv-series").classed("disabled",!1),e}),O(e)}),t.dispatch.on("elementMouseover.tooltip",function(e){d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",e.pos[1]-_),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",e.pos[0]+o.size()),e.pos=[e.pos[0]+a.left,e.pos[1]+a.top],T.tooltipShow(e)}),T.on("tooltipShow",function(e){w&&L(e,x.parentNode)}),C=h.copy(),k=p.copy()}),O}var t=e.models.scatter(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.legend(),o=e.models.distribution(),u=e.models.distribution(),a={top:30,right:20,bottom:50,left:60},f=null,l=null,c=e.utils.defaultColor(),h=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):t.xScale(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):t.yScale(),d=!1,v=!1,m=!0,g=!!d3.fisheye,y=0,b=!1,w=!0,E=function(e,t,n){return"<strong>"+t+"</strong>"},S=function(e,t,n){return"<strong>"+n+"</strong>"},x=null,T=d3.dispatch("tooltipShow","tooltipHide"),N="No Data Available.";t.xScale(h).yScale(p),n.orient("bottom").tickPadding(10),r.orient("left").tickPadding(10),o.axis("x"),u.axis("y");var C,k,L=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),f=i.pos[0]+(s.offsetLeft||0),l=p.range()[0]+a.top+(s.offsetTop||0),c=h.range()[0]+a.left+(s.offsetLeft||0),d=i.pos[1]+(s.offsetTop||0),v=n.tickFormat()(t.x()(i.point,i.pointIndex)),m=r.tickFormat()(t.y()(i.point,i.pointIndex));E!=null&&e.tooltip.show([f,l],E(i.series.key,v,m,i,O),"n",1,s,"x-nvtooltip"),S!=null&&e.tooltip.show([c,d],S(i.series.key,v,m,i,O),"e",1,s,"y-nvtooltip"),x!=null&&e.tooltip.show([o,u],x(i.series.key,v,m,i,O),i.value<0?"n":"s",null,s)},A=[{key:"Magnify",disabled:!0}];return t.dispatch.on("elementMouseout.tooltip",function(e){T.tooltipHide(e),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",0),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",u.size())}),T.on("tooltipHide",function(){w&&e.tooltip.cleanup()}),O.dispatch=T,O.scatter=t,O.legend=i,O.controls=s,O.xAxis=n,O.yAxis=r,O.distX=o,O.distY=u,d3.rebind(O,t,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),O.margin=function(e){return arguments.length?(a.top=typeof e.top!="undefined"?e.top:a.top,a.right=typeof e.right!="undefined"?e.right:a.right,a.bottom=typeof e.bottom!="undefined"?e.bottom:a.bottom,a.left=typeof e.left!="undefined"?e.left:a.left,O):a},O.width=function(e){return arguments.length?(f=e,O):f},O.height=function(e){return arguments.length?(l=e,O):l},O.color=function(t){return arguments.length?(c=e.utils.getColor(t),i.color(c),o.color(c),u.color(c),O):c},O.showDistX=function(e){return arguments.length?(d=e,O):d},O.showDistY=function(e){return arguments.length?(v=e,O):v},O.showControls=function(e){return arguments.length?(g=e,O):g},O.showLegend=function(e){return arguments.length?(m=e,O):m},O.fisheye=function(e){return arguments.length?(y=e,O):y},O.tooltips=function(e){return arguments.length?(w=e,O):w},O.tooltipContent=function(e){return arguments.length?(x=e,O):x},O.tooltipXContent=function(e){return arguments.length?(E=e,O):E},O.tooltipYContent=function(e){return arguments.length?(S=e,O):S},O.noData=function(e){return arguments.length?(N=e,O):N},O},e.models.sparkline=function(){function h(e){return e.each(function(e){var i=n-t.left-t.right,h=r-t.top-t.bottom,p=d3.select(this);s.domain(l||d3.extent(e,u)).range([0,i]),o.domain(c||d3.extent(e,a)).range([h,0]);var d=p.selectAll("g.nv-wrap.nv-sparkline").data([e]),v=d.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),m=v.append("g"),g=d.select("g");d.attr("transform","translate("+t.left+","+t.top+")");var b=d.selectAll("path").data(function(e){return[e]});b.enter().append("path"),b.exit().remove(),b.style("stroke",function(e,t){return e.color||f(e,t)}).attr("d",d3.svg.line().x(function(e,t){return s(u(e,t))}).y(function(e,t){return o(a(e,t))}));var w=d.selectAll("circle.nv-point").data(function(e){return e.filter(function(e,t){return o.domain().indexOf(a(e,t))!=-1||u(e,t)==s.domain()[1]})});w.enter().append("circle").attr("class","nv-point"),w.exit().remove(),w.attr("cx",function(e,t){return s(u(e,t))}).attr("cy",function(e,t){return o(a(e,t))}).attr("r",2).style("stroke",function(e,t){return e.x==s.domain()[1]?"#444":e.y==o.domain()[0]?"#d62728":"#2ca02c"}).style("fill",function(e,t){return e.x==s.domain()[1]?"#444":e.y==o.domain()[0]?"#d62728":"#2ca02c"})}),h}var t={top:2,right:0,bottom:2,left:0},n=400,r=32,i=!0,s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=e.utils.getColor(["#000"]),l,c;return h.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,h):t},h.width=function(e){return arguments.length?(n=e,h):n},h.height=function(e){return arguments.length?(r=e,h):r},h.x=function(e){return arguments.length?(u=d3.functor(e),h):u},h.y=function(e){return arguments.length?(a=d3.functor(e),h):a},h.xScale=function(e){return arguments.length?(s=e,h):s},h.yScale=function(e){return arguments.length?(o=e,h):o},h.xDomain=function(e){return arguments.length?(l=e,h):l},h.yDomain=function(e){return arguments.length?(c=e,h):c},h.animate=function(e){return arguments.length?(i=e,h):i},h.color=function(t){return arguments.length?(f=e.utils.getColor(t),h):f},h},e.models.sparklinePlus=function(){function p(e){return e.each(function(d){function M(){if(f)return;C.data([a]),C.transition().duration(250).style("stroke-opacity",function(e){return e===null?0:1}).style("fill-opacity",function(e){return e===null?0:1});if(a==null)return;C.attr("transform",function(e){return"translate("+s(t.x()(d[e],e))+",0)"}),C.select(".nv-xValue").text(l(t.x()(d[a],a))),C.select(".nv-yValue").text(c(t.y()(d[a],a)))}function _(){function r(e,n){var r=Math.abs(t.x()(e[0],0)-n),i=0;for(var s=0;s<e.length;s++)Math.abs(t.x()(e[s],s)-n)<r&&(r=Math.abs(t.x()(e[s],s)-n),i=s);return i}if(f)return;var e=d3.event.offsetX-n.left;a=r(d,Math.round(s.invert(e))),M()}var v=d3.select(this),m=(r||parseInt(v.style("width"))||960)-n.left-n.right,g=(i||parseInt(v.style("height"))||400)-n.top-n.bottom;p.update=function(){p(e)},p.container=this;if(!d||!d.length){var b=v.selectAll(".nv-noData").data([h]);return b.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),b.attr("x",n.left+m/2).attr("y",n.top+g/2).text(function(e){return e}),p}v.selectAll(".nv-noData").remove(),s=t.xScale(),o=t.yScale();var w=v.selectAll("g.nv-wrap.nv-sparklineplus").data([d]),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),S=E.append("g"),T=w.select("g");S.append("g").attr("class","nv-sparklineWrap"),S.append("g").attr("class","nv-hoverArea"),w.attr("transform","translate("+n.left+","+n.top+")");var N=T.select(".nv-sparklineWrap");t.width(m).height(g),N.style("stroke",function(e,t){return e.color||u(e,t)}).call(t),S.select(".nv-hoverArea").append("rect").on("mousemove",_).on("click",function(){f=!f}).on("mouseout",function(){a=null,M()}),T.select(".nv-hoverArea rect").attr("transform",function(e){return"translate("+ -n.left+","+ -n.top+")"}).attr("width",m+n.left+n.right).attr("height",g+n.top),a=typeof a=="undefined"?null:a;var C=T.selectAll(".nv-hoverValue").data([a]),k=C.enter().append("g").attr("class","nv-hoverValue"),L=k.append("line").attr("x1",0).attr("y1",-n.top).attr("x2",0).attr("y2",g),A=k.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-n.top).attr("text-anchor","end").attr("dy",".9em"),O=k.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-n.top).attr("text-anchor","start").attr("dy",".9em");M()}),p}var t=e.models.sparkline(),n={top:15,right:40,bottom:3,left:40},r=null,i=null,s,o,u=e.utils.defaultColor(),a,f=!1,l=d3.format(",r"),c=d3.format(",.2f"),h="No Data Available.";return p.sparkline=t,d3.rebind(p,t,"x","y","xScale","yScale"),p.margin=function(e){return arguments.length?(n.top=typeof e.top!="undefined"?e.top:n.top,n.right=typeof e.right!="undefined"?e.right:n.right,n.bottom=typeof e.bottom!="undefined"?e.bottom:n.bottom,n.left=typeof e.left!="undefined"?e.left:n.left,p):n},p.width=function(e){return arguments.length?(r=e,p):r},p.height=function(e){return arguments.length?(i=e,p):i},p.xTickFormat=function(e){return arguments.length?(l=e,p):l},p.yTickFormat=function(e){return arguments.length?(c=e,p):c},p.noData=function(e){return arguments.length?(h=e,p):h},p},e.models.stackedArea=function(){function g(e){return e.each(function(e){var a=n-t.left-t.right,g=r-t.top-t.bottom,b=d3.select(this);p=v.xScale(),d=v.yScale(),e=e.map(function(e,t){return e.values=e.values.map(function(t,n){return t.index=n,t.stackedY=e.disabled?0:u(t,n),t}),e}),e=d3.layout.stack().order(l).offset(f).values(function(e){return e.values}).x(o).y(function(e){return e.stackedY}).out(function(e,t,n){e.display={y:n,y0:t}})(e);var w=b.selectAll("g.nv-wrap.nv-stackedarea").data([e]),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),S=E.append("defs"),T=E.append("g"),N=w.select("g");T.append("g").attr("class","nv-areaWrap"),T.append("g").attr("class","nv-scatterWrap"),w.attr("transform","translate("+t.left+","+t.top+")"),v.width(a).height(g).x(o).y(function(e){return e.display.y+e.display.y0}).forceY([0]).color(e.map(function(e,t){return e.color||i(e,t)}).filter(function(t,n){return!e[n].disabled}));var C=N.select(".nv-scatterWrap").datum(e.filter(function(e){return!e.disabled}));d3.transition(C).call(v),S.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect"),w.select("#nv-edge-clip-"+s+" rect").attr("width",a).attr("height",g),N.attr("clip-path",h?"url(#nv-edge-clip-"+s+")":"");var k=d3.svg.area().x(function(e,t){return p(o(e,t))}).y0(function(e){return d(e.display.y0)}).y1(function(e){return d(e.display.y+e.display.y0)}).interpolate(c),L=d3.svg.area().x(function(e,t){return p(o(e,t))}).y0(function(e){return d(e.display.y0)}).y1(function(e){return d(e.display.y0)}),A=N.select(".nv-areaWrap").selectAll("path.nv-area").data(function(e){return e});A.enter().append("path").attr("class",function(e,t){return"nv-area nv-area-"+t}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),m.areaMouseover({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),m.areaMouseout({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}).on("click",function(e,t){d3.select(this).classed("hover",!1),m.areaClick({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t})}),d3.transition(A.exit()).attr("d",function(e,t){return L(e.values,t)}).remove(),A.style("fill",function(e,t){return e.color||i(e,t)}).style("stroke",function(e,t){return e.color||i(e,t)}),d3.transition(A).attr("d",function(e,t){return k(e.values,t)}),v.dispatch.on("elementMouseover.area",function(e){N.select(".nv-chart-"+s+" .nv-area-"+e.seriesIndex).classed("hover",!0)}),v.dispatch.on("elementMouseout.area",function(e){N.select(".nv-chart-"+s+" .nv-area-"+e.seriesIndex).classed("hover",!1)})}),g}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=e.utils.defaultColor(),s=Math.floor(Math.random()*1e5),o=function(e){return e.x},u=function(e){return e.y},a="stack",f="zero",l="default",c="linear",h=!1,p,d,v=e.models.scatter(),m=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return v.size(2.2).sizeDomain([2.2]),v.dispatch.on("elementClick.area",function(e){m.areaClick(e)}),v.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],m.tooltipShow(e)}),v.dispatch.on("elementMouseout.tooltip",function(e){m.tooltipHide(e)}),g.dispatch=m,g.scatter=v,d3.rebind(g,v,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius"),g.x=function(e){return arguments.length?(o=d3.functor(e),g):o},g.y=function(e){return arguments.length?(u=d3.functor(e),g):u},g.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,g):t},g.width=function(e){return arguments.length?(n=e,g):n},g.height=function(e){return arguments.length?(r=e,g):r},g.clipEdge=function(e){return arguments.length?(h=e,g):h},g.color=function(t){return arguments.length?(i=e.utils.getColor(t),g):i},g.offset=function(e){return arguments.length?(f=e,g):f},g.order=function(e){return arguments.length?(l=e,g):l},g.style=function(e){if(!arguments.length)return a;a=e;switch(a){case"stack":g.offset("zero"),g.order("default");break;case"stream":g.offset("wiggle"),g.order("inside-out");break;case"stream-center":g.offset("silhouette"),g.order("inside-out");break;case"expand":g.offset("expand"),g.order("default")}return g},g.interpolate=function(e){return arguments.length?(c=e,c):c},g},e.models.stackedAreaChart=function(){function w(e){return e.each(function(f){var p=d3.select(this),E=this,S=(u||parseInt(p.style("width"))||960)-o.left-o.right,T=(a||parseInt(p.style("height"))||400)-o.top-o.bottom;w.update=function(){w(e)},w.container=this;if(!f||!f.length||!f.filter(function(e){return e.values.length}).length){var N=p.selectAll(".nv-noData").data([g]);return N.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),N.attr("x",o.left+S/2).attr("y",o.top+T/2).text(function(e){return e}),w}p.selectAll(".nv-noData").remove(),d=t.xScale(),v=t.yScale();var C=p.selectAll("g.nv-wrap.nv-stackedAreaChart").data([f]),k=C.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),L=C.select("g");k.append("g").attr("class","nv-x nv-axis"),k.append("g").attr("class","nv-y nv-axis"),k.append("g").attr("class","nv-stackedWrap"),k.append("g").attr("class","nv-legendWrap"),k.append("g").attr("class","nv-controlsWrap"),c&&(i.width(S/2),L.select(".nv-legendWrap").datum(f).call(i),o.top!=i.height()&&(o.top=i.height(),T=(a||parseInt(p.style("height"))||400)-o.top-o.bottom),L.select(".nv-legendWrap").attr("transform","translate("+S/2+","+ -o.top+")"));if(l){var A=[{key:"Stacked",disabled:t.offset()!="zero"},{key:"Stream",disabled:t.offset()!="wiggle"},{key:"Expanded",disabled:t.offset()!="expand"}];s.width(280).color(["#444","#444","#444"]),L.select(".nv-controlsWrap").datum(A).attr("transform","translate(0,"+ -o.top+")").call(s)}C.attr("transform","translate("+o.left+","+o.top+")"),t.width(S).height(T);var O=L.select(".nv-stackedWrap").datum(f);d3.transition(O).call(t),n.scale(d).ticks(S/100).tickSize(-T,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+T+")"),d3.transition(L.select(".nv-x.nv-axis")).call(n),r.scale(v).ticks(t.offset()=="wiggle"?0:T/36).tickSize(-S,0).setTickFormat(t.offset()=="expand"?d3.format("%"):m),d3.transition(L.select(".nv-y.nv-axis")).call(r),t.dispatch.on("areaClick.toggle",function(t){f.filter(function(e){return!e.disabled}).length===1?f=f.map(function(e){return e.disabled=!1,e}):f=f.map(function(e,n){return e.disabled=n!=t.seriesIndex,e}),e.transition().call(w)}),i.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,f.filter(function(e){return!e.disabled}).length||f.map(function(e){return e.disabled=!1,e}),e.transition().call(w)}),s.dispatch.on("legendClick",function(n,r){if(!n.disabled)return;A=A.map(function(e){return e.disabled=!0,e}),n.disabled=!1;switch(n.key){case"Stacked":t.style("stack");break;case"Stream":t.style("stream");break;case"Expanded":t.style("expand")}e.transition().call(w)}),y.on("tooltipShow",function(e){h&&b(e,E.parentNode)})}),w}var t=e.models.stackedArea(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.legend(),o={top:30,right:25,bottom:50,left:60},u=null,a=null,f=e.utils.defaultColor(),l=!0,c=!0,h=!0,p=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},d,v,m=d3.format(",.2f"),g="No Data Available.",y=d3.dispatch("tooltipShow","tooltipHide");n.orient("bottom").tickPadding(5),r.orient("left");var b=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=p(i.series.key,a,f,i,w);e.tooltip.show([o,u],l,i.value<0?"n":"s",null,s)};return t.dispatch.on("tooltipShow",function(e){if(!Math.round(t.y()(e.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],y.tooltipShow(e)}),t.dispatch.on("tooltipHide",function(e){y.tooltipHide(e)}),y.on("tooltipHide",function(){h&&e.tooltip.cleanup()}),w.dispatch=y,w.stacked=t,w.legend=i,w.controls=s,w.xAxis=n,w.yAxis=r,d3.rebind(w,t,"x","y","size","xScale","yScale","xDomain","yDomain","sizeDomain","interactive","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),w.margin=function(e){return arguments.length?(o.top=typeof e.top!="undefined"?e.top:o.top,o.right=typeof e.right!="undefined"?e.right:o.right,o.bottom=typeof e.bottom!="undefined"?e.bottom:o.bottom,o.left=typeof e.left!="undefined"?e.left:o.left,w):o},w.width=function(e){return arguments.length?(u=e,w):getWidth},w.height=function(e){return arguments.length?(a=e,w):getHeight},w.color=function(n){return arguments.length?(f=e.utils.getColor(n),i.color(f),t.color(f),w):f},w.showControls=function(e){return arguments.length?(l=e,w):l},w.showLegend=function(e){return arguments.length?(c=e,w):c},w.tooltip=function(e){return arguments.length?(p=e,w):p},w.tooltips=function(e){return arguments.length?(h=e,w):h},w.tooltipContent=function(e){return arguments.length?(p=e,w):p},w.noData=function(e){return arguments.length?(g=e,w):g},r.setTickFormat=r.tickFormat,r.tickFormat=function(e){return arguments.length?(m=e,r):m},w}})();